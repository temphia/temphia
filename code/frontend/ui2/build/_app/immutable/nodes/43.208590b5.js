import{s as y,a as N,c as h,i as v,d as C,P as F,A as L}from"../chunks/scheduler.e2ee220a.js";import{S as P,i as S,b as g,d as b,m as $,t as p,c as D,a as m,e as w,g as E}from"../chunks/index.4aee2103.js";import"../chunks/paths.3df37c61.js";import{F as I}from"../chunks/floating_add.1495f8dc.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{A as q}from"../chunks/autotable.0057460b.js";import{L as B}from"../chunks/loading_spinner.ede256fc.js";function M(r){let e,a;return e=new q({props:{action_key:"id",actions:[{Name:"Execute",Class:"bg-blue-400",Action:r[2],icon:"lightning-bolt"},{Name:"Agents",Class:"bg-green-400",Action:r[3],icon:"users"},{Name:"Edit",Action:r[4],drop:!0,icon:"pencil-alt"},{Name:"States",Action:r[5],drop:!0,icon:"database"},{Name:"Flow Map",Action:r[6],drop:!0,icon:"map"},{Name:"Logs",drop:!0,icon:"document-search",Action:r[9]},{Name:"Files",Action:r[11],Class:"bg-green-400",icon:"document-duplicate",drop:!0},{Name:"Reset",Action:r[8],drop:!0,icon:"refresh"},{Name:"Delete",Class:"bg-red-400",Action:r[7],icon:"trash",drop:!0}],key_names:[["id","ID"],["name","Name"],["owner","Owner"],["bprint_id","Bprint Id"]],color:[],datas:r[0],show_drop:!0}}),{c(){g(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,i){$(e,t,i),a=!0},p(t,i){const s={};i&1&&(s.datas=t[0]),e.$set(s)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function O(r){let e,a;return e=new B({}),{c(){g(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,i){$(e,t,i),a=!0},p:L,i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function R(r){let e,a,t,i,s;const l=[O,M],c=[];function f(n,_){return n[1]?0:1}return e=f(r),a=c[e]=l[e](r),i=new I({props:{onClick:r[10]}}),{c(){a.c(),t=N(),g(i.$$.fragment)},l(n){a.l(n),t=h(n),b(i.$$.fragment,n)},m(n,_){c[e].m(n,_),v(n,t,_),$(i,n,_),s=!0},p(n,[_]){let u=e;e=f(n),e===u?c[e].p(n,_):(E(),p(c[u],1,1,()=>{c[u]=null}),D(),a=c[e],a?a.p(n,_):(a=c[e]=l[e](n),a.c()),m(a,1),a.m(t.parentNode,t))},i(n){s||(m(a),m(i.$$.fragment,n),s=!0)},o(n){p(a),p(i.$$.fragment,n),s=!1},d(n){n&&C(t),c[e].d(n),w(i,n)}}}function j(r,e,a){let t=[],i=!0;const s=F("__app__"),l=s.api_manager.get_admin_plug_api(),c=async()=>{const o=await l.list_plug();o.ok&&(a(0,t=o.data),a(1,i=!1))};return c(),[t,i,o=>s.nav.admin_plug_dev_execute(o,"default"),o=>s.nav.admin_agents(o),o=>s.nav.admin_plug_edit(o),o=>s.nav.admin_plug_states(o),o=>s.nav.admin_plug_dev_flowmap(o),async o=>{await s.api_manager.get_admin_plug_api().delete_plug(o),c()},async o=>{a(1,i=!0);const d=s.api_manager.get_engine_api(),k=await l.list_agent(o);if(!k.ok){a(1,i=!1);return}await Promise.all(k.data.map(async A=>{await d.reset(o,A.id)})).finally(()=>{a(1,i=!1)})},o=>{s.nav.admin_lens_logs({filters:{plug_id:o}})},()=>s.nav.admin_plug_new(),(o,d)=>{s.nav.cab_folder("default",`bprints/${d.bprint_id}`)}]}class x extends P{constructor(e){super(),S(this,e,j,R,y,{})}}export{x as component};
