import{s as _,B as c,P as f}from"../chunks/scheduler.e2ee220a.js";import{S as u,i as g,b as d,d as l,m as y,a as T,t as E,e as $}from"../chunks/index.4aee2103.js";import{A as k}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.2eaeb908.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.c28228c7.js";import{p as X}from"../chunks/index.5458542a.js";function v(o){let a,n;return a=new k({props:{message:o[0],schema:{fields:[{name:"Slug",ftype:"TEXT_SLUG",key_name:"slug"},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Resource Id",ftype:"TEXT",key_name:"resource_id"},{name:"Actions",ftype:"MULTI_TEXT",key_name:"actions"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Agent Resource",required_fields:[]},onSave:o[2],data:o[1]}}),{c(){d(a.$$.fragment)},l(e){l(a.$$.fragment,e)},m(e,t){y(a,e,t),n=!0},p(e,[t]){const s={};t&1&&(s.message=e[0]),t&2&&(s.data=e[1]),a.$set(s)},i(e){n||(T(a.$$.fragment,e),n=!0)},o(e){E(a.$$.fragment,e),n=!1},d(e){$(a,e)}}}function A(o,a,n){let e;c(o,X,m=>n(3,e=m));const t=f("__app__"),s=t.api_manager.get_admin_plug_api();let i="",r={plug_id:e.pid,agent_id:e.aid};return t.nav.options&&(r={...r,...t.nav.options}),[i,r,async m=>{const p=await s.new_agent_resource(e.pid,e.aid,{...r,...m});if(!p.ok){n(0,i=p.data);return}t.nav.admin_agents(e.pid)}]}class C extends u{constructor(a){super(),g(this,a,A,v,_,{})}}export{C as component};
