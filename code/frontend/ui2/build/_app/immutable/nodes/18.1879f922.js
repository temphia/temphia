import{s as K,f as m,a as A,g,h as b,C as W,c as L,d as p,j as $,i as T,w as d,Q as ge,l as V,m as F,n as R,P as se,D as ve,k as ye,e as ue,A as G,B as xe}from"../chunks/scheduler.e2ee220a.js";import{S as X,i as Z,a as k,g as ee,c as te,t as E,b as I,d as S,m as H,e as N}from"../chunks/index.4aee2103.js";import"../chunks/paths.555c70f8.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.9f9ec163.js";import{L as be}from"../chunks/loading_spinner.4ceee987.js";import{S as ke,a as pe}from"../chunks/stepper.ce9fe1e4.js";import{e as J}from"../chunks/each.e59479a4.js";import{I as $e}from"../chunks/Icon.9e22c3e4.js";import{p as we}from"../chunks/index.37ddda1f.js";function de(o,e,s){const t=o.slice();return t[3]=e[s][0],t[4]=e[s][1],t}function _e(o){let e,s,t,l,a,r,u,n=o[3]+"",_,c,f,i,h=o[4].type+"",C,Y,j,O='<button class="bg-blue-200 text-blue-600 py-1 px-3 rounded-full text-xs">manual</button>',z,P;return t=new $e({props:{name:o[1][o[4].type]||"hashtag",class:"w-6 h-6 text-blue-600 "}}),{c(){e=m("tr"),s=m("td"),I(t.$$.fragment),l=A(),a=m("td"),r=m("div"),u=m("span"),_=V(n),c=A(),f=m("td"),i=m("span"),C=V(h),Y=A(),j=m("td"),j.innerHTML=O,z=A(),this.h()},l(w){e=g(w,"TR",{class:!0});var v=b(e);s=g(v,"TD",{class:!0});var M=b(s);S(t.$$.fragment,M),M.forEach(p),l=L(v),a=g(v,"TD",{class:!0});var B=b(a);r=g(B,"DIV",{class:!0});var Q=b(r);u=g(Q,"SPAN",{});var q=b(u);_=F(q,n),q.forEach(p),Q.forEach(p),B.forEach(p),c=L(v),f=g(v,"TD",{class:!0});var D=b(f);i=g(D,"SPAN",{class:!0});var y=b(i);C=F(y,h),y.forEach(p),D.forEach(p),Y=L(v),j=g(v,"TD",{class:!0,"data-svelte-h":!0}),W(j)!=="svelte-1uymsjx"&&(j.innerHTML=O),z=L(v),v.forEach(p),this.h()},h(){$(s,"class","py-3 px-6 text-left whitespace-nowrap"),$(r,"class","flex items-center"),$(a,"class","py-3 px-6 text-left"),$(i,"class","text-sm bg-gray-200 p-1 rounded"),$(f,"class","py-3 px-6 text-center"),$(j,"class","py-3 px-6 text-center"),$(e,"class","border-b border-gray-200 hover:bg-gray-100")},m(w,v){T(w,e,v),d(e,s),H(t,s,null),d(e,l),d(e,a),d(a,r),d(r,u),d(u,_),d(e,c),d(e,f),d(f,i),d(i,C),d(e,Y),d(e,j),d(e,z),P=!0},p(w,v){const M={};v&1&&(M.name=w[1][w[4].type]||"hashtag"),t.$set(M),(!P||v&1)&&n!==(n=w[3]+"")&&R(_,n),(!P||v&1)&&h!==(h=w[4].type+"")&&R(C,h)},i(w){P||(k(t.$$.fragment,w),P=!0)},o(w){E(t.$$.fragment,w),P=!1},d(w){w&&p(e),N(t)}}}function Ee(o){let e,s,t='<tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">#</th> <th class="py-3 px-6 text-left">Item</th> <th class="py-3 px-6 text-left">Type</th> <th class="py-3 px-6 text-center">Actions</th></tr>',l,a,r,u=J(Object.entries(o[0].objects||{})),n=[];for(let c=0;c<u.length;c+=1)n[c]=_e(de(o,u,c));const _=c=>E(n[c],1,1,()=>{n[c]=null});return{c(){e=m("table"),s=m("thead"),s.innerHTML=t,l=A(),a=m("tbody");for(let c=0;c<n.length;c+=1)n[c].c();this.h()},l(c){e=g(c,"TABLE",{class:!0});var f=b(e);s=g(f,"THEAD",{"data-svelte-h":!0}),W(s)!=="svelte-r4sopz"&&(s.innerHTML=t),l=L(f),a=g(f,"TBODY",{class:!0});var i=b(a);for(let h=0;h<n.length;h+=1)n[h].l(i);i.forEach(p),f.forEach(p),this.h()},h(){$(a,"class","text-gray-600 text-sm font-light"),$(e,"class","min-w-max w-full table-auto border")},m(c,f){T(c,e,f),d(e,s),d(e,l),d(e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,null);r=!0},p(c,[f]){if(f&3){u=J(Object.entries(c[0].objects||{}));let i;for(i=0;i<u.length;i+=1){const h=de(c,u,i);n[i]?(n[i].p(h,f),k(n[i],1)):(n[i]=_e(h),n[i].c(),k(n[i],1),n[i].m(a,null))}for(ee(),i=u.length;i<n.length;i+=1)_(i);te()}},i(c){if(!r){for(let f=0;f<u.length;f+=1)k(n[f]);r=!0}},o(c){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)E(n[f]);r=!1},d(c){c&&p(e),ge(n,c)}}}function Te(o,e,s){let{bid:t}=e,{items:l}=e;const a={data_group:"collection",plug:"view-grid-add",resource:"cube",data_sheet:"table"};return o.$$set=r=>{"bid"in r&&s(2,t=r.bid),"items"in r&&s(0,l=r.items)},[l,a,t]}class je extends X{constructor(e){super(),Z(this,e,Te,Ee,K,{bid:2,items:0})}}function he(o,e,s){const t=o.slice();return t[5]=e[s][0],t[6]=e[s][1],t}function De(o){let e,s="explore",t,l;function a(){return o[3](o[6])}return{c(){e=m("button"),e.textContent=s,this.h()},l(r){e=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1wk3r2e"&&(e.textContent=s),this.h()},h(){$(e,"class","bg-blue-200 text-blue-600 py-1 px-3 rounded-full text-xs")},m(r,u){T(r,e,u),t||(l=ve(e,"click",a),t=!0)},p(r,u){o=r},d(r){r&&p(e),t=!1,l()}}}function Ce(o){let e,s=o[6].message+"",t;return{c(){e=m("p"),t=V(s)},l(l){e=g(l,"P",{});var a=b(e);t=F(a,s),a.forEach(p)},m(l,a){T(l,e,a),d(e,t)},p(l,a){a&1&&s!==(s=l[6].message+"")&&R(t,s)},d(l){l&&p(e)}}}function me(o){let e,s,t,l,a,r,u,n=o[5]+"",_,c,f,i,h=o[6].slug+"",C,Y,j,O,z=o[6].type+"",P,w,v,M,B;t=new $e({props:{name:o[1][o[6].type]||"hashtag",class:"w-6 h-6 text-blue-600"}});function Q(y,x){return y[6].message?Ce:De}let q=Q(o),D=q(o);return{c(){e=m("tr"),s=m("td"),I(t.$$.fragment),l=A(),a=m("td"),r=m("div"),u=m("span"),_=V(n),c=A(),f=m("td"),i=m("span"),C=V(h),Y=A(),j=m("td"),O=m("span"),P=V(z),w=A(),v=m("td"),D.c(),M=A(),this.h()},l(y){e=g(y,"TR",{class:!0});var x=b(e);s=g(x,"TD",{class:!0});var U=b(s);S(t.$$.fragment,U),U.forEach(p),l=L(x),a=g(x,"TD",{class:!0});var ne=b(a);r=g(ne,"DIV",{class:!0});var ae=b(r);u=g(ae,"SPAN",{});var le=b(u);_=F(le,n),le.forEach(p),ae.forEach(p),ne.forEach(p),c=L(x),f=g(x,"TD",{class:!0});var re=b(f);i=g(re,"SPAN",{class:!0});var oe=b(i);C=F(oe,h),oe.forEach(p),re.forEach(p),Y=L(x),j=g(x,"TD",{class:!0});var ce=b(j);O=g(ce,"SPAN",{class:!0});var ie=b(O);P=F(ie,z),ie.forEach(p),ce.forEach(p),w=L(x),v=g(x,"TD",{class:!0});var fe=b(v);D.l(fe),fe.forEach(p),M=L(x),x.forEach(p),this.h()},h(){$(s,"class","py-3 px-6 text-left whitespace-nowrap"),$(r,"class","flex items-center"),$(a,"class","py-3 px-6 text-left"),$(i,"class","flex items-center bg-gray-100 rounded"),$(f,"class","py-3 px-6 text-left"),$(O,"class","text-sm bg-gray-200 p-1 rounded"),$(j,"class","py-3 px-6 text-center"),$(v,"class","py-3 px-6 text-center"),$(e,"class","border-b border-gray-200 hover:bg-gray-100")},m(y,x){T(y,e,x),d(e,s),H(t,s,null),d(e,l),d(e,a),d(a,r),d(r,u),d(u,_),d(e,c),d(e,f),d(f,i),d(i,C),d(e,Y),d(e,j),d(j,O),d(O,P),d(e,w),d(e,v),D.m(v,null),d(e,M),B=!0},p(y,x){const U={};x&1&&(U.name=y[1][y[6].type]||"hashtag"),t.$set(U),(!B||x&1)&&n!==(n=y[5]+"")&&R(_,n),(!B||x&1)&&h!==(h=y[6].slug+"")&&R(C,h),(!B||x&1)&&z!==(z=y[6].type+"")&&R(P,z),q===(q=Q(y))&&D?D.p(y,x):(D.d(1),D=q(y),D&&(D.c(),D.m(v,null)))},i(y){B||(k(t.$$.fragment,y),B=!0)},o(y){E(t.$$.fragment,y),B=!1},d(y){y&&p(e),N(t),D.d()}}}function Ae(o){let e,s,t='<tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">#</th> <th class="py-3 px-6 text-left">Name</th> <th class="py-3 px-6 text-left">Item</th> <th class="py-3 px-6 text-left">Type</th> <th class="py-3 px-6 text-center">Actions</th></tr>',l,a,r,u=J(Object.entries(o[0]||{})),n=[];for(let c=0;c<u.length;c+=1)n[c]=me(he(o,u,c));const _=c=>E(n[c],1,1,()=>{n[c]=null});return{c(){e=m("table"),s=m("thead"),s.innerHTML=t,l=A(),a=m("tbody");for(let c=0;c<n.length;c+=1)n[c].c();this.h()},l(c){e=g(c,"TABLE",{class:!0});var f=b(e);s=g(f,"THEAD",{"data-svelte-h":!0}),W(s)!=="svelte-lo7wnh"&&(s.innerHTML=t),l=L(f),a=g(f,"TBODY",{class:!0});var i=b(a);for(let h=0;h<n.length;h+=1)n[h].l(i);i.forEach(p),f.forEach(p),this.h()},h(){$(a,"class","text-gray-600 text-sm font-light"),$(e,"class","w-full table-auto border")},m(c,f){T(c,e,f),d(e,s),d(e,l),d(e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,null);r=!0},p(c,[f]){if(f&7){u=J(Object.entries(c[0]||{}));let i;for(i=0;i<u.length;i+=1){const h=he(c,u,i);n[i]?(n[i].p(h,f),k(n[i],1)):(n[i]=me(h),n[i].c(),k(n[i],1),n[i].m(a,null))}for(ee(),i=u.length;i<n.length;i+=1)_(i);te()}},i(c){if(!r){for(let f=0;f<u.length;f+=1)k(n[f]);r=!0}},o(c){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)E(n[f]);r=!1},d(c){c&&p(e),ge(n,c)}}}function Le(o,e,s){const t=se("__app__");let{installed_items:l={}}=e;const a={data_group:"collection",plug:"view-grid-add",resource:"cube",data_sheet:"table"},r=n=>{switch(n){case"data_group":case"data_sheet":case"data_table":t.nav.data_loader();break;case"resource":t.nav.admin_resources();break;case"plug":t.nav.admin_plugs();break;default:t.nav.admin_bprints();break}},u=n=>r(n.type);return o.$$set=n=>{"installed_items"in n&&s(0,l=n.installed_items)},[l,a,r,u]}class Pe extends X{constructor(e){super(),Z(this,e,Le,Ae,K,{installed_items:0})}}function Be(o){let e,s,t,l=`Click next to instance items automatically or click manual to
                instance individual items.`,a;return e=new je({props:{bid:o[0],items:o[1]}}),{c(){I(e.$$.fragment),s=A(),t=m("p"),t.textContent=l,this.h()},l(r){S(e.$$.fragment,r),s=L(r),t=g(r,"P",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1mzwzmn"&&(t.textContent=l),this.h()},h(){$(t,"class","text-sm italic my-1")},m(r,u){H(e,r,u),T(r,s,u),T(r,t,u),a=!0},p(r,u){const n={};u&1&&(n.bid=r[0]),u&2&&(n.items=r[1]),e.$set(n)},i(r){a||(k(e.$$.fragment,r),a=!0)},o(r){E(e.$$.fragment,r),a=!1},d(r){r&&(p(s),p(t)),N(e,r)}}}function Ie(o){let e;return{c(){e=V("Blueprint items")},l(s){e=F(s,"Blueprint items")},m(s,t){T(s,e,t)},d(s){s&&p(e)}}}function Se(o){let e,s;return e=new Pe({props:{installed_items:o[5]}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},p(t,l){const a={};l&32&&(a.installed_items=t[5]),e.$set(a)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function He(o){let e,s;return{c(){e=m("p"),s=V(o[3]),this.h()},l(t){e=g(t,"P",{class:!0});var l=b(e);s=F(l,o[3]),l.forEach(p),this.h()},h(){$(e,"class","bg-red-500")},m(t,l){T(t,e,l),d(e,s)},p(t,l){l&8&&R(s,t[3])},i:G,o:G,d(t){t&&p(e)}}}function Ne(o){let e,s;return e=new be({props:{classes:""}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},p:G,i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Oe(o){let e,s,t,l;const a=[Ne,He,Se],r=[];function u(n,_){return n[2]?0:n[3]?1:2}return e=u(o),s=r[e]=a[e](o),{c(){s.c(),t=ue()},l(n){s.l(n),t=ue()},m(n,_){r[e].m(n,_),T(n,t,_),l=!0},p(n,_){let c=e;e=u(n),e===c?r[e].p(n,_):(ee(),E(r[c],1,1,()=>{r[c]=null}),te(),s=r[e],s?s.p(n,_):(s=r[e]=a[e](n),s.c()),k(s,1),s.m(t.parentNode,t))},i(n){l||(k(s),l=!0)},o(n){E(s),l=!1},d(n){n&&p(t),r[e].d(n)}}}function ze(o){let e=o[2]?"Instancing":"Finished",s;return{c(){s=V(e)},l(t){s=F(t,e)},m(t,l){T(t,s,l)},p(t,l){l&4&&e!==(e=t[2]?"Instancing":"Finished")&&R(s,e)},d(t){t&&p(s)}}}function Me(o){let e,s,t,l;return e=new pe({props:{back_locked:!0,locked:o[2],$$slots:{header:[Ie],default:[Be]},$$scope:{ctx:o}}}),t=new pe({props:{back_locked:o[4],$$slots:{header:[ze],default:[Oe]},$$scope:{ctx:o}}}),{c(){I(e.$$.fragment),s=A(),I(t.$$.fragment)},l(a){S(e.$$.fragment,a),s=L(a),S(t.$$.fragment,a)},m(a,r){H(e,a,r),T(a,s,r),H(t,a,r),l=!0},p(a,r){const u={};r&4&&(u.locked=a[2]),r&1027&&(u.$$scope={dirty:r,ctx:a}),e.$set(u);const n={};r&16&&(n.back_locked=a[4]),r&1068&&(n.$$scope={dirty:r,ctx:a}),t.$set(n)},i(a){l||(k(e.$$.fragment,a),k(t.$$.fragment,a),l=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),l=!1},d(a){a&&p(s),N(e,a),N(t,a)}}}function Ve(o){let e,s,t;return s=new ke({props:{buttonCompleteLabel:"",$$slots:{default:[Me]},$$scope:{ctx:o}}}),s.$on("next",o[6]),{c(){e=m("div"),I(s.$$.fragment),this.h()},l(l){e=g(l,"DIV",{class:!0,style:!0});var a=b(e);S(s.$$.fragment,a),a.forEach(p),this.h()},h(){$(e,"class","card p-2 bg-white border shadow mx-auto"),ye(e,"max-width","750px")},m(l,a){T(l,e,a),H(s,e,null),t=!0},p(l,[a]){const r={};a&1087&&(r.$$scope={dirty:a,ctx:l}),s.$set(r)},i(l){t||(k(s.$$.fragment,l),t=!0)},o(l){E(s.$$.fragment,l),t=!1},d(l){l&&p(e),N(s)}}}function Fe(o,e,s){let{bid:t}=e,{appjson:l}=e,{bprintjson:a}=e;const u=se("__app__").api_manager.get_admin_bprint_api();let n=!1,_="",c=!1,f={};const i=async h=>{if(h.detail.step===0){s(2,n=!0);const C=await u.instance(t,{auto:!0,instancer_type:"app",file:"app.json"});if(!C.ok){s(4,c=!0),s(3,_=C.data),s(2,n=!1);return}s(5,f=C.data),s(4,c=!0),s(2,n=!1)}};return o.$$set=h=>{"bid"in h&&s(0,t=h.bid),"appjson"in h&&s(1,l=h.appjson),"bprintjson"in h&&s(7,a=h.bprintjson)},[t,l,n,_,c,f,i,a]}class Re extends X{constructor(e){super(),Z(this,e,Fe,Ve,K,{bid:0,appjson:1,bprintjson:7})}}function Ye(o){let e,s;return e=new Re({props:{bid:o[3],appjson:o[1],bprintjson:o[2]}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},p(t,l){const a={};l&2&&(a.appjson=t[1]),l&4&&(a.bprintjson=t[2]),e.$set(a)},i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function qe(o){let e,s;return e=new be({}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},p:G,i(t){s||(k(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Qe(o){let e,s,t,l;const a=[qe,Ye],r=[];function u(n,_){return n[0]?0:1}return s=u(o),t=r[s]=a[s](o),{c(){e=m("div"),t.c(),this.h()},l(n){e=g(n,"DIV",{class:!0});var _=b(e);t.l(_),_.forEach(p),this.h()},h(){$(e,"class","p-4")},m(n,_){T(n,e,_),r[s].m(e,null),l=!0},p(n,[_]){let c=s;s=u(n),s===c?r[s].p(n,_):(ee(),E(r[c],1,1,()=>{r[c]=null}),te(),t=r[s],t?t.p(n,_):(t=r[s]=a[s](n),t.c()),k(t,1),t.m(e,null))},i(n){l||(k(t),l=!0)},o(n){E(t),l=!1},d(n){n&&p(e),r[s].d()}}}function Ue(o,e,s){let t;xe(o,we,f=>s(4,t=f));let l=t.bid;const r=se("__app__").api_manager.get_admin_bprint_api();let u=!0,n={},_={};return(async()=>{const f=await r.get(l);if(!f.ok){console.log("err",f);return}if(s(2,_=f.data),f.data.type!=="app"){console.log("not implemented",f.data);return}const i=await r.get_file(l,"app.json");if(!i.ok){console.log("Err",i);return}s(1,n=i.data),s(0,u=!1)})(),[u,n,_,l]}class nt extends X{constructor(e){super(),Z(this,e,Ue,Qe,K,{})}}export{nt as component};
