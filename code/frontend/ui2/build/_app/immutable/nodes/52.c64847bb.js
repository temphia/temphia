import{s as u,B as g,P as c}from"../chunks/scheduler.e2ee220a.js";import{S as l,i as T,b as y,d as k,m as E,a as X,t as b,e as A}from"../chunks/index.4aee2103.js";import{A as h}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.3df37c61.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{p as w}from"../chunks/index.008d0d8b.js";function P(i){let a,n;return a=new h({props:{modified:!0,message:i[0],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"From Plug",ftype:"TEXT",key_name:"from_plug_id",disabled:!0},{name:"From Agent",ftype:"TEXT",key_name:"from_agent_id",disabled:!0},{name:"To Plug",ftype:"TEXT",key_name:"to_plug_id"},{name:"To Agent",ftype:"TEXT",key_name:"to_agent_id"},{name:"To Handler",ftype:"TEXT",key_name:"to_handler"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Link",required_fields:[]},onSave:i[2],data:i[1]}}),{c(){y(a.$$.fragment)},l(e){k(a.$$.fragment,e)},m(e,t){E(a,e,t),n=!0},p(e,[t]){const o={};t&1&&(o.message=e[0]),t&2&&(o.data=e[1]),a.$set(o)},i(e){n||(X(a.$$.fragment,e),n=!0)},o(e){b(a.$$.fragment,e),n=!1},d(e){A(a,e)}}}function v(i,a,n){let e;g(i,w,m=>n(5,e=m));let{pid:t=e.pid}=a,{aid:o=e.aid}=a;const r=c("__app__"),f=r.api_manager.get_admin_plug_api();let _="",s={from_agent_id:o,from_plug_id:t};r.nav.options&&(s={...s,...r.nav.options});const d=async m=>{const p=await f.new_agent_link(t,o,{...s,...m});if(!p.ok){n(0,_=p.data);return}r.nav.admin_agents(t)};return i.$$set=m=>{"pid"in m&&n(3,t=m.pid),"aid"in m&&n(4,o=m.aid)},[_,s,d,t,o]}class N extends l{constructor(a){super(),T(this,a,v,P,u,{pid:3,aid:4})}}export{N as component};
