import{s as c,B as d,P as E}from"../chunks/scheduler.e2ee220a.js";import{S as l,i as u,b as k,d as X,m as A,a as P,t as b,e as h}from"../chunks/index.4aee2103.js";import{A as I}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.555c70f8.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.9f9ec163.js";import{p as L}from"../chunks/index.37ddda1f.js";function Y(n){let t,m;return t=new I({props:{message:n[2],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Target Type",ftype:"TEXT",key_name:"target_type",disabled:!!n[0]},{name:"Target",ftype:"TEXT",key_name:"target",disabled:!!n[1]},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Handler",ftype:"TEXT",key_name:"handler"},{name:"Exec Meta",ftype:"KEY_VALUE_TEXT",key_name:"exec_meta"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Target Hook",required_fields:[]},onSave:n[4],data:n[3]}}),{c(){k(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,a){A(t,e,a),m=!0},p(e,[a]){const r={};a&4&&(r.message=e[2]),a&3&&(r.schema={fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Target Type",ftype:"TEXT",key_name:"target_type",disabled:!!e[0]},{name:"Target",ftype:"TEXT",key_name:"target",disabled:!!e[1]},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Handler",ftype:"TEXT",key_name:"handler"},{name:"Exec Meta",ftype:"KEY_VALUE_TEXT",key_name:"exec_meta"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Target Hook",required_fields:[]}),a&8&&(r.data=e[3]),t.$set(r)},i(e){m||(P(t.$$.fragment,e),m=!0)},o(e){b(t.$$.fragment,e),m=!1},d(e){h(t,e)}}}function w(n,t,m){let e;d(n,L,_=>m(5,e=_));let{ttype:a=e.ttype}=t,{target:r=e.target}=t;const s=E("__app__"),f=s.api_manager.get_admin_target_api();let p="",o={};a&&(o.target_type=a),r&&(o.target=r);const y=s.nav.options;y&&(o={...y});const T=async _=>{const g=_.target_type||o.target_type,i=await f.newHook(g,{...o,..._});if(!i.ok){m(2,p=i.data);return}s.nav.admin_target_hooks()};return n.$$set=_=>{"ttype"in _&&m(0,a=_.ttype),"target"in _&&m(1,r=_.target)},[a,r,p,o,T]}class U extends l{constructor(t){super(),u(this,t,w,Y,c,{ttype:0,target:1})}}export{U as component};
