import{s as te,f as b,a as L,l as F,g as v,h as D,C as U,c as N,m as q,d as h,j as g,k as de,i as z,w as p,D as J,R as ke,n as W,A as X,e as fe,Q as be,P as ye}from"../chunks/scheduler.e2ee220a.js";import{S as le,i as ae,a as P,g as ne,t as S,c as se,b as Y,d as K,m as Q,e as Z}from"../chunks/index.4aee2103.js";import{e as ee}from"../chunks/each.e59479a4.js";import{I as ve}from"../chunks/Icon.9e22c3e4.js";import"../chunks/paths.555c70f8.js";import{F as xe}from"../chunks/floating_add.1495f8dc.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.9f9ec163.js";import{A as we}from"../chunks/autotable.0057460b.js";import{L as Ee}from"../chunks/loading_spinner.4ceee987.js";function $e(s){let e,l,t='<h1 role="main" class="text-3xl lg:text-4xl font-semibold leading-7 lg:leading-9 text-center text-gray-800">Your developer Token</h1>',n,r,f,i=JSON.stringify(s[0],null,2)+"",u,a,o,c="OK",w,_;return{c(){e=b("div"),l=b("div"),l.innerHTML=t,n=L(),r=b("div"),f=b("pre"),u=F(i),a=L(),o=b("button"),o.textContent=c,this.h()},l(m){e=v(m,"DIV",{class:!0});var k=D(e);l=v(k,"DIV",{"data-svelte-h":!0}),U(l)!=="svelte-1554z1r"&&(l.innerHTML=t),n=N(k),r=v(k,"DIV",{class:!0});var I=D(r);f=v(I,"PRE",{class:!0,style:!0});var E=D(f);u=q(E,i),E.forEach(h),I.forEach(h),a=N(k),o=v(k,"BUTTON",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-rzvzq8"&&(o.textContent=c),k.forEach(h),this.h()},h(){g(f,"class","overflow-scroll rounded bg-gray-200 h-full"),de(f,"max-width","95%"),de(f,"margin","auto"),g(r,"class","w-full p-4"),g(o,"class","mt-5 px-2 py-1 flex text-white font-semibold rounded bg-green-400 hover:bg-green-600"),g(e,"class","w-full relative flex flex-col justify-center items-center bg-white")},m(m,k){z(m,e,k),p(e,l),p(e,n),p(e,r),p(r,f),p(f,u),p(e,a),p(e,o),w||(_=J(o,"click",function(){ke(s[1])&&s[1].apply(this,arguments)}),w=!0)},p(m,[k]){s=m,k&1&&i!==(i=JSON.stringify(s[0],null,2)+"")&&W(u,i)},i:X,o:X,d(m){m&&h(e),w=!1,_()}}}function Te(s,e,l){let{ticket:t}=e,{close:n}=e;return s.$$set=r=>{"ticket"in r&&l(0,t=r.ticket),"close"in r&&l(1,n=r.close)},[t,n]}class Ce extends le{constructor(e){super(),ae(this,e,Te,$e,te,{ticket:0,close:1})}}function pe(s,e,l){const t=s.slice();return t[10]=e[l],t}function _e(s){let e,l,t,n,r,f,i,u,a,o,c,w,_=s[10].id+"",m,k,I,E=s[10].name+"",A,H,V,B=s[10].live+"",R,O,y,$='<a href="#" class="text-blue-600 dark:text-blue-500 hover:underline">Explore</a>',d,x,T;function j(){return s[6](s[10])}return{c(){e=b("tr"),l=b("td"),t=b("div"),n=b("input"),i=L(),u=b("label"),a=F("checkbox"),c=L(),w=b("td"),m=F(_),k=L(),I=b("td"),A=F(E),H=L(),V=b("td"),R=F(B),O=L(),y=b("td"),y.innerHTML=$,d=L(),this.h()},l(M){e=v(M,"TR",{class:!0});var C=D(e);l=v(C,"TD",{class:!0});var re=D(l);t=v(re,"DIV",{class:!0});var G=D(t);n=v(G,"INPUT",{id:!0,type:!0,class:!0}),i=N(G),u=v(G,"LABEL",{for:!0,class:!0});var ie=D(u);a=q(ie,"checkbox"),ie.forEach(h),G.forEach(h),re.forEach(h),c=N(C),w=v(C,"TD",{class:!0});var oe=D(w);m=q(oe,_),oe.forEach(h),k=N(C),I=v(C,"TD",{class:!0});var ce=D(I);A=q(ce,E),ce.forEach(h),H=N(C),V=v(C,"TD",{class:!0});var ue=D(V);R=q(ue,B),ue.forEach(h),O=N(C),y=v(C,"TD",{class:!0,"data-svelte-h":!0}),U(y)!=="svelte-wdu68r"&&(y.innerHTML=$),d=N(C),C.forEach(h),this.h()},h(){g(n,"id",r="checkbox-table-"+s[10].id),g(n,"type","checkbox"),n.checked=f=s[4].includes(s[10].id),n.disabled=s[3],g(n,"class","w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"),g(u,"for",o="checkbox-table-"+s[10].id),g(u,"class","sr-only"),g(t,"class","flex items-center"),g(l,"class","p-4 w-4"),g(w,"class","py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"),g(I,"class","py-4 px-6 text-sm font-medium text-gray-500 whitespace-nowrap dark:text-white"),g(V,"class","py-4 px-6 text-sm font-medium text-gray-900 whitespace-nowrap dark:text-white"),g(y,"class","py-4 px-6 text-sm font-medium text-right whitespace-nowrap"),g(e,"class","hover:bg-gray-100 dark:hover:bg-gray-700")},m(M,C){z(M,e,C),p(e,l),p(l,t),p(t,n),p(t,i),p(t,u),p(u,a),p(e,c),p(e,w),p(w,m),p(e,k),p(e,I),p(I,A),p(e,H),p(e,V),p(V,R),p(e,O),p(e,y),p(e,d),x||(T=J(n,"click",j),x=!0)},p(M,C){s=M,C&4&&r!==(r="checkbox-table-"+s[10].id)&&g(n,"id",r),C&20&&f!==(f=s[4].includes(s[10].id))&&(n.checked=f),C&8&&(n.disabled=s[3]),C&4&&o!==(o="checkbox-table-"+s[10].id)&&g(u,"for",o),C&4&&_!==(_=s[10].id+"")&&W(m,_),C&4&&E!==(E=s[10].name+"")&&W(A,E),C&4&&B!==(B=s[10].live+"")&&W(R,B)},d(M){M&&h(e),x=!1,T()}}}function me(s){let e,l,t,n,r,f,i;return t=new ve({props:{name:"terminal",class:"h-5 w-5"}}),{c(){e=b("div"),l=b("button"),Y(t.$$.fragment),n=F(`
        Issue`),this.h()},l(u){e=v(u,"DIV",{class:!0});var a=D(e);l=v(a,"BUTTON",{class:!0});var o=D(l);K(t.$$.fragment,o),n=q(o,`
        Issue`),o.forEach(h),a.forEach(h),this.h()},h(){g(l,"class","p-1 flex text-white font-semibold rounded bg-green-400 hover:bg-green-600"),g(e,"class","flex justify-end")},m(u,a){z(u,e,a),p(e,l),Q(t,l,null),p(l,n),r=!0,f||(i=J(l,"click",s[8]),f=!0)},p:X,i(u){r||(P(t.$$.fragment,u),r=!0)},o(u){S(t.$$.fragment,u),r=!1},d(u){u&&h(e),Z(t),f=!1,i()}}}function Ie(s){let e,l="Select plugs to include.",t,n,r,f='<tr><th scope="col" class="p-4"></th> <th scope="col" class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase dark:text-gray-400">Id</th> <th scope="col" class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase dark:text-gray-400">Name</th> <th scope="col" class="py-3 px-6 text-xs font-medium tracking-wider text-left text-gray-700 uppercase dark:text-gray-400">Live</th> <th scope="col" class="p-4"></th></tr>',i,u,a,o,c,w,_,m="All Plugs",k,I,E="That includes all future plugs instanced from this blueprint.",A,H,V,B,R,O=ee(s[2]),y=[];for(let d=0;d<O.length;d+=1)y[d]=_e(pe(s,O,d));let $=(s[3]||s[4].length!=0)&&me(s);return{c(){e=b("h4"),e.textContent=l,t=L(),n=b("table"),r=b("thead"),r.innerHTML=f,i=L(),u=b("tbody");for(let d=0;d<y.length;d+=1)y[d].c();a=L(),o=b("div"),c=b("input"),w=L(),_=b("label"),_.textContent=m,k=L(),I=b("p"),I.textContent=E,A=L(),$&&$.c(),H=fe(),this.h()},l(d){e=v(d,"H4",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1pzpg9e"&&(e.textContent=l),t=N(d),n=v(d,"TABLE",{class:!0});var x=D(n);r=v(x,"THEAD",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-1qb5tai"&&(r.innerHTML=f),i=N(x),u=v(x,"TBODY",{class:!0});var T=D(u);for(let M=0;M<y.length;M+=1)y[M].l(T);T.forEach(h),x.forEach(h),a=N(d),o=v(d,"DIV",{class:!0});var j=D(o);c=v(j,"INPUT",{id:!0,type:!0,class:!0}),w=N(j),_=v(j,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),U(_)!=="svelte-iyzxcg"&&(_.textContent=m),j.forEach(h),k=N(d),I=v(d,"P",{class:!0,"data-svelte-h":!0}),U(I)!=="svelte-v9ao1n"&&(I.textContent=E),A=N(d),$&&$.l(d),H=fe(),this.h()},h(){g(e,"class","mb-3 block text-base font-medium uppercase text-gray-500"),g(r,"class","bg-gray-100 dark:bg-gray-700"),g(u,"class","bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"),g(n,"class","min-w-full divide-y divide-gray-200 table-fixed dark:divide-gray-700 border rounded"),g(c,"id","checkbox-all"),g(c,"type","checkbox"),g(c,"class","w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"),g(_,"for","checkbox-all"),g(_,"class","text-gray-800"),g(o,"class","flex justify-start gap-2 p-2"),g(I,"class","text-sm text-gray-500")},m(d,x){z(d,e,x),z(d,t,x),z(d,n,x),p(n,r),p(n,i),p(n,u);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(u,null);z(d,a,x),z(d,o,x),p(o,c),c.checked=s[3],p(o,w),p(o,_),z(d,k,x),z(d,I,x),z(d,A,x),$&&$.m(d,x),z(d,H,x),V=!0,B||(R=J(c,"change",s[7]),B=!0)},p(d,[x]){if(x&28){O=ee(d[2]);let T;for(T=0;T<O.length;T+=1){const j=pe(d,O,T);y[T]?y[T].p(j,x):(y[T]=_e(j),y[T].c(),y[T].m(u,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=O.length}x&8&&(c.checked=d[3]),d[3]||d[4].length!=0?$?($.p(d,x),x&24&&P($,1)):($=me(d),$.c(),P($,1),$.m(H.parentNode,H)):$&&(ne(),S($,1,1,()=>{$=null}),se())},i(d){V||(P($),V=!0)},o(d){S($),V=!1},d(d){d&&(h(e),h(t),h(n),h(a),h(o),h(k),h(I),h(A),h(H)),be(y,d),$&&$.d(d),B=!1,R()}}}function De(s,e,l){let{bid:t}=e,{app:n}=e;const r=n.api_manager.get_admin_bprint_api();let f=[],i=!1,u=[];(async()=>{const m=await n.api_manager.get_admin_bprint_api().list_plugs(t);m.status===200&&l(2,f=m.data)})();const o=_=>{u.includes(_.id)?l(4,u=u.filter(m=>m!==_.id)):l(4,u=[_.id,...u])};function c(){i=this.checked,l(3,i)}const w=async()=>{const _=await r.issue(t,{all_plugs:i,plug_ids:u});if(!_.ok){console.log("Err",_);return}n.utils.small_modal_open(Ce,{ticket:_.data,close:n.utils.small_modal_close})};return s.$$set=_=>{"bid"in _&&l(0,t=_.bid),"app"in _&&l(1,n=_.app)},[t,n,f,i,u,r,o,c,w]}class Le extends le{constructor(e){super(),ae(this,e,De,Ie,te,{bid:0,app:1})}}function he(s,e,l){const t=s.slice();return t[3]=e[l],t}function ge(s){let e,l,t,n,r,f=s[3].name+"",i,u,a,o=s[3].info+"",c,w,_,m,k;l=new ve({props:{name:s[3].icon,class:"w-10 h-10 text-zinc-600"}});function I(){return s[2](s[3])}return{c(){e=b("div"),Y(l.$$.fragment),t=L(),n=b("div"),r=b("h4"),i=F(f),u=L(),a=b("p"),c=F(o),w=L(),this.h()},l(E){e=v(E,"DIV",{class:!0});var A=D(e);K(l.$$.fragment,A),t=N(A),n=v(A,"DIV",{});var H=D(n);r=v(H,"H4",{class:!0});var V=D(r);i=q(V,f),V.forEach(h),u=N(H),a=v(H,"P",{class:!0});var B=D(a);c=q(B,o),B.forEach(h),H.forEach(h),w=N(A),A.forEach(h),this.h()},h(){g(r,"class","font-semibold text-gray-600"),g(a,"class","text-sm text-slate-400"),g(e,"class","flex space-x-4 rounded-xl bg-white p-3 shadow-sm hover:border border-blue-500 cursor-pointer")},m(E,A){z(E,e,A),Q(l,e,null),p(e,t),p(e,n),p(n,r),p(r,i),p(n,u),p(n,a),p(a,c),p(e,w),_=!0,m||(k=J(e,"click",I),m=!0)},p(E,A){s=E},i(E){_||(P(l.$$.fragment,E),_=!0)},o(E){S(l.$$.fragment,E),_=!1},d(E){E&&h(e),Z(l),m=!1,k()}}}function Ne(s){let e,l='<h4 class="font-medium text-slate-500">How do you like your new blueprint?</h4>',t,n,r,f=ee(s[1]),i=[];for(let a=0;a<f.length;a+=1)i[a]=ge(he(s,f,a));const u=a=>S(i[a],1,1,()=>{i[a]=null});return{c(){e=b("div"),e.innerHTML=l,t=L(),n=b("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-13x84z7"&&(e.innerHTML=l),t=N(a),n=v(a,"DIV",{class:!0});var o=D(n);for(let c=0;c<i.length;c+=1)i[c].l(o);o.forEach(h),this.h()},h(){g(e,"class","flex items-center justify-between"),g(n,"class","space-y-2 mt-4")},m(a,o){z(a,e,o),z(a,t,o),z(a,n,o);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);r=!0},p(a,[o]){if(o&3){f=ee(a[1]);let c;for(c=0;c<f.length;c+=1){const w=he(a,f,c);i[c]?(i[c].p(w,o),P(i[c],1)):(i[c]=ge(w),i[c].c(),P(i[c],1),i[c].m(n,null))}for(ne(),c=f.length;c<i.length;c+=1)u(c);se()}},i(a){if(!r){for(let o=0;o<f.length;o+=1)P(i[o]);r=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)S(i[o]);r=!1},d(a){a&&(h(e),h(t),h(n)),be(i,a)}}}function Ae(s,e,l){let{app:t}=e;const n=[{name:"From Store",icon:"view-grid-add",info:"Import blueprint from repo store",action:()=>t.nav.repo_loader()},{name:"From zip",icon:"archive",info:"Upload using bprint zip",action:()=>t.nav.admin_bprint_new_zip()},{name:"Empty",icon:"sparkles",info:"Create Empty Bprint",action:()=>t.nav.admin_bprint_new()}],r=f=>{f.action(),t.utils.small_modal_close()};return s.$$set=f=>{"app"in f&&l(0,t=f.app)},[t,n,r]}class ze extends le{constructor(e){super(),ae(this,e,Ae,Ne,te,{app:0})}}function He(s){let e,l;return e=new we({props:{show_drop:!0,color:["type"],action_key:"id",actions:[{Name:"Instance",Class:"bg-blue-400",icon:"document-download",Action:s[2]},{Name:"Files",Action:s[7],Class:"bg-green-400",icon:"document-duplicate"},{Name:"Edit",Action:s[3],icon:"pencil-alt",drop:!0},{Name:"Issue",Action:s[4],drop:!0,icon:"terminal"},{Name:"Zip it",Action:s[8],drop:!0,icon:"archive"},{Name:"Delete",drop:!0,icon:"trash",Action:s[5]}],key_names:[["id","ID"],["name","Name"],["slug","Slug"],["type","Type"],["sub_type","Sub Type"]],datas:s[0]}}),{c(){Y(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.datas=t[0]),e.$set(r)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Ve(s){let e,l;return e=new Ee({}),{c(){Y(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p:X,i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){S(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Pe(s){let e,l,t,n,r;const f=[Ve,He],i=[];function u(a,o){return a[1]?0:1}return e=u(s),l=i[e]=f[e](s),n=new xe({props:{onClick:s[6]}}),{c(){l.c(),t=L(),Y(n.$$.fragment)},l(a){l.l(a),t=N(a),K(n.$$.fragment,a)},m(a,o){i[e].m(a,o),z(a,t,o),Q(n,a,o),r=!0},p(a,[o]){let c=e;e=u(a),e===c?i[e].p(a,o):(ne(),S(i[c],1,1,()=>{i[c]=null}),se(),l=i[e],l?l.p(a,o):(l=i[e]=f[e](a),l.c()),P(l,1),l.m(t.parentNode,t))},i(a){r||(P(l),P(n.$$.fragment,a),r=!0)},o(a){S(l),S(n.$$.fragment,a),r=!1},d(a){a&&h(t),i[e].d(a),Z(n,a)}}}function Be(s,e,l){let t=[],n=!0;const r=ye("__app__"),f=async()=>{const k=await r.api_manager.get_admin_bprint_api().list();k.ok&&(l(0,t=k.data),l(1,n=!1))};return f(),[t,n,async m=>{r.nav.admin_bprint_instancer(m)},m=>r.nav.admin_bprint(m),m=>r.utils.small_modal_open(Le,{app:r,bid:m}),async m=>{await r.api_manager.get_admin_bprint_api().delete(m),f()},()=>{r.utils.small_modal_open(ze,{app:r})},m=>{r.nav.cab_folder("default",`bprints/${m}`)},m=>r.nav.admin_bprint_export_zip(m)]}class Ye extends le{constructor(e){super(),ae(this,e,Be,Pe,te,{})}}export{Ye as component};
