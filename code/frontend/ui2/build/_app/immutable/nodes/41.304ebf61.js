import{s as L,e as E,i as S,d as W,B as $,P as A,A as h}from"../chunks/scheduler.e2ee220a.js";import{S as x,i as F,t as l,c as U,a as y,g as C,b as d,d as k,m as b,e as g}from"../chunks/index.4aee2103.js";import{A as I}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.2eaeb908.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.c28228c7.js";import{L as K}from"../chunks/loading_spinner.4ef87ddf.js";import{p as V}from"../chunks/index.5458542a.js";function Y(m){let t,a;return t=new I({props:{message:m[0],schema:{fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Type",ftype:"TEXT",key_name:"type"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:m[3]},{name:"Interface File",ftype:"TEXT",key_name:"iface_file"},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Entry",ftype:"TEXT",key_name:"web_entry"},{name:"Web Script",ftype:"TEXT",key_name:"web_script"},{name:"Web Style",ftype:"TEXT",key_name:"web_style"},{name:"Web Loader",ftype:"TEXT",key_name:"web_loader"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Agent",required_fields:[]},onSave:m[4],data:m[1]}}),{c(){d(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),a=!0},p(e,r){const o={};r&1&&(o.message=e[0]),r&8&&(o.schema={fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Type",ftype:"TEXT",key_name:"type"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:e[3]},{name:"Interface File",ftype:"TEXT",key_name:"iface_file"},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Entry",ftype:"TEXT",key_name:"web_entry"},{name:"Web Script",ftype:"TEXT",key_name:"web_script"},{name:"Web Style",ftype:"TEXT",key_name:"web_style"},{name:"Web Loader",ftype:"TEXT",key_name:"web_loader"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Agent",required_fields:[]}),r&2&&(o.data=e[1]),t.$set(o)},i(e){a||(y(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){g(t,e)}}}function q(m){let t,a;return t=new K({}),{c(){d(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),a=!0},p:h,i(e){a||(y(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){g(t,e)}}}function N(m){let t,a,e,r;const o=[q,Y],_=[];function p(n,s){return n[2]?0:1}return t=p(m),a=_[t]=o[t](m),{c(){a.c(),e=E()},l(n){a.l(n),e=E()},m(n,s){_[t].m(n,s),S(n,e,s),r=!0},p(n,[s]){let f=t;t=p(n),t===f?_[t].p(n,s):(C(),l(_[f],1,1,()=>{_[f]=null}),U(),a=_[t],a?a.p(n,s):(a=_[t]=o[t](n),a.c()),y(a,1),a.m(e.parentNode,e))},i(n){r||(y(a),r=!0)},o(n){l(a),r=!1},d(n){n&&W(e),_[t].d(n)}}}function G(m,t,a){let e;$(m,V,i=>a(5,e=i));let r=e,o=r.pid,_=r.aid;const p=A("__app__"),n=p.api_manager.get_admin_plug_api();let s="",f={},c=!0,u=[];p.api_manager.self_api.list_executors().then(i=>{a(3,u=i.data||[])}).catch(()=>{});const X=async()=>{const i=await n.get_agent(o,_);if(!i.ok){a(0,s=i.data);return}a(1,f=i.data),a(2,c=!1)},w=async i=>{const T=await n.update_agent(o,_,i);if(!T.ok){a(0,s=T.data);return}p.nav.admin_agents(o)};return X(),[s,f,c,u,w]}class H extends x{constructor(t){super(),F(this,t,G,N,L,{})}}export{H as component};
