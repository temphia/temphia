import{s as c,B as y,P as E}from"../chunks/scheduler.e2ee220a.js";import{S as u,i as l,b as d,d as T,m as g,a as k,t as x,e as X}from"../chunks/index.4aee2103.js";import{A}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.3df37c61.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{p as L}from"../chunks/index.008d0d8b.js";function $(n){let a,t;return a=new A({props:{message:n[1],schema:{fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Renderer",ftype:"TEXT",key_name:"renderer"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:n[0]},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Agent",required_fields:[]},onSave:n[2],data:{}}}),{c(){d(a.$$.fragment)},l(e){T(a.$$.fragment,e)},m(e,m){g(a,e,m),t=!0},p(e,[m]){const r={};m&2&&(r.message=e[1]),m&1&&(r.schema={fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Renderer",ftype:"TEXT",key_name:"renderer"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:e[0]},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Agent",required_fields:[]}),a.$set(r)},i(e){t||(k(a.$$.fragment,e),t=!0)},o(e){x(a.$$.fragment,e),t=!1},d(e){X(a,e)}}}function b(n,a,t){let e;y(n,L,s=>t(3,e=s));let r=e.pid;const o=E("__app__"),f=o.api_manager.get_admin_plug_api();let _=[];o.api_manager.self_api.list_executors().then(s=>{t(0,_=s.data||[])}).catch(()=>{});let p="";return[_,p,async s=>{const i=await f.new_agent(r,s);if(!i.ok){t(1,p=i.data);return}o.nav.admin_agents(r)}]}class V extends u{constructor(a){super(),l(this,a,b,$,c,{})}}export{V as component};
