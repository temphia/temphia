import{s as $,e as d,i as b,d as E,B as A,P as X,A as L}from"../chunks/scheduler.e2ee220a.js";import{S as h,i as I,t as l,c as P,a as u,g as S,b as g,d as y,m as k,e as T}from"../chunks/index.4aee2103.js";import{A as w}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.3df37c61.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{L as C}from"../chunks/loading_spinner.ede256fc.js";import{p as U}from"../chunks/index.008d0d8b.js";function q(s){let t,a;return t=new w({props:{message:s[0],schema:{fields:[{name:"Slug",ftype:"TEXT_SLUG",key_name:"slug"},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Resource Id",ftype:"TEXT",key_name:"resource_id"},{name:"Actions",ftype:"MULTI_TEXT",key_name:"actions"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Agent Resource",required_fields:[]},onSave:s[3],data:s[1]}}),{c(){g(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){k(t,e,r),a=!0},p(e,r){const i={};r&1&&(i.message=e[0]),r&2&&(i.data=e[1]),t.$set(i)},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){T(t,e)}}}function v(s){let t,a;return t=new C({}),{c(){g(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){k(t,e,r),a=!0},p:L,i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){T(t,e)}}}function M(s){let t,a,e,r;const i=[v,q],o=[];function c(n,m){return n[2]?0:1}return t=c(s),a=o[t]=i[t](s),{c(){a.c(),e=d()},l(n){a.l(n),e=d()},m(n,m){o[t].m(n,m),b(n,e,m),r=!0},p(n,[m]){let p=t;t=c(n),t===p?o[t].p(n,m):(S(),l(o[p],1,1,()=>{o[p]=null}),P(),a=o[t],a?a.p(n,m):(a=o[t]=i[t](n),a.c()),u(a,1),a.m(e.parentNode,e))},i(n){r||(u(a),r=!0)},o(n){l(a),r=!1},d(n){n&&E(e),o[t].d(n)}}}function R(s,t,a){let e;A(s,U,_=>a(4,e=_));const r=X("__app__"),i=r.api_manager.get_admin_plug_api();let o="",c={},n=!0;const m=async()=>{const _=await i.get_agent_resource(e.pid,e.aid,e.rid);_.ok&&(a(1,c=_.data),a(2,n=!1))},p=async _=>{const f=await i.update_agent_resource(e.pid,e.aid,e.rid,_);if(!f.ok){a(0,o=f.data);return}r.nav.admin_agents(e.pid)};return m(),[o,c,n,p]}class V extends h{constructor(t){super(),I(this,t,R,M,$,{})}}export{V as component};
