import{s as x,f as N,a as D,l as M,g as E,h as $,C as B,c as L,m as q,d as w,j as v,i as A,w as p,W as K,D as H,A as U,J as oe,Q as ie,B as X,P as ce,n as fe,u as ue,x as de,y as _e,z as he}from"../chunks/scheduler.e2ee220a.js";import{S as ne,i as re,a as I,t as T,c as j,b as F,d as J,m as Q,g as P,e as R}from"../chunks/index.4aee2103.js";import{e as Y}from"../chunks/each.e59479a4.js";import{p as me}from"../chunks/index.5ed445fc.js";import{I as W}from"../chunks/Icon.9e22c3e4.js";import{c as pe}from"../chunks/select.297e1f2d.js";function ve(c){let e,l,s='<h2 class="text-xl font-bold text-gray-900">New Folder!</h2>',t,a,n,g,_,o,r,u,d,m,b,i;return{c(){e=N("div"),l=N("div"),l.innerHTML=s,t=D(),a=N("div"),n=N("label"),g=M(`Name
      `),_=N("input"),o=D(),r=N("div"),u=N("button"),d=M("Create"),this.h()},l(f){e=E(f,"DIV",{class:!0});var C=$(e);l=E(C,"DIV",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-lqsh45"&&(l.innerHTML=s),t=L(C),a=E(C,"DIV",{class:!0});var h=$(a);n=E(h,"LABEL",{class:!0});var y=$(n);g=q(y,`Name
      `),_=E(y,"INPUT",{class:!0,type:!0,placeholder:!0}),y.forEach(w),o=L(h),r=E(h,"DIV",{class:!0});var k=$(r);u=E(k,"BUTTON",{class:!0});var V=$(u);d=q(V,"Create"),V.forEach(w),k.forEach(w),h.forEach(w),C.forEach(w),this.h()},h(){v(l,"class","text-center"),v(_,"class","text-base p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 w-full"),v(_,"type","text"),v(_,"placeholder","new_folder"),v(n,"class","text-sm font-bold text-gray-500 tracking-wide"),u.disabled=m=c[1]==="",v(u,"class","btn variant-filled-primary"),v(r,"class","inline-flex justify-end"),v(a,"class","p-4 flex flex-col gap-2"),v(e,"class","w-full h-full")},m(f,C){A(f,e,C),p(e,l),p(e,t),p(e,a),p(a,n),p(n,g),p(n,_),K(_,c[1]),p(a,o),p(a,r),p(r,u),p(u,d),b||(i=[H(_,"input",c[2]),H(u,"click",c[3])],b=!0)},p(f,[C]){C&2&&_.value!==f[1]&&K(_,f[1]),C&2&&m!==(m=f[1]==="")&&(u.disabled=m)},i:U,o:U,d(f){f&&w(e),b=!1,oe(i)}}}function be(c,e,l){let{onNewName:s}=e,t="";function a(){t=this.value,l(1,t)}const n=()=>s(t);return c.$$set=g=>{"onNewName"in g&&l(0,s=g.onNewName)},[s,t,a,n]}class ge extends ne{constructor(e){super(),re(this,e,be,ve,x,{onNewName:0})}}function Z(c,e,l){const s=c.slice();return s[12]=e[l],s[14]=l,s}function ee(c){let e,l="/",s,t,a,n=c[12]+"",g,_,o;return{c(){e=N("li"),e.textContent=l,s=D(),t=N("li"),a=N("a"),g=M(n),o=D(),this.h()},l(r){e=E(r,"LI",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),B(e)!=="svelte-1t7edrb"&&(e.textContent=l),s=L(r),t=E(r,"LI",{class:!0});var u=$(t);a=E(u,"A",{class:!0,href:!0});var d=$(a);g=q(d,n),d.forEach(w),o=L(u),u.forEach(w),this.h()},h(){v(e,"class","crumb-separator"),v(e,"aria-hidden",""),v(a,"class","anchor"),v(a,"href",_="/z/pages/portal/cabinet/listings/folder?source="+c[0].source+"&folder="+c[2].slice(0,c[14]+1).join("/")),v(t,"class","crumb")},m(r,u){A(r,e,u),A(r,s,u),A(r,t,u),p(t,a),p(a,g),p(t,o)},p(r,u){u&4&&n!==(n=r[12]+"")&&fe(g,n),u&5&&_!==(_="/z/pages/portal/cabinet/listings/folder?source="+r[0].source+"&folder="+r[2].slice(0,r[14]+1).join("/"))&&v(a,"href",_)},d(r){r&&(w(e),w(s),w(t))}}}function te(c){let e,l,s,t,a,n,g="New Folder",_,o,r,u,d=c[0].folder&&le(c);t=new W({props:{name:"folder-add",class:"h-4 w4"}});let m=c[3].item&&c[3].folder&&se();return{c(){e=N("div"),d&&d.c(),l=D(),s=N("button"),F(t.$$.fragment),a=D(),n=N("span"),n.textContent=g,_=D(),m&&m.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var i=$(e);d&&d.l(i),l=L(i),s=E(i,"BUTTON",{class:!0});var f=$(s);J(t.$$.fragment,f),a=L(f),n=E(f,"SPAN",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-1f6kofb"&&(n.textContent=g),f.forEach(w),_=L(i),m&&m.l(i),i.forEach(w),this.h()},h(){v(n,"class","hidden md:inline"),v(s,"class","btn btn-sm variant-filled-primary"),v(e,"class","flex flex-row gap-1")},m(b,i){A(b,e,i),d&&d.m(e,null),p(e,l),p(e,s),Q(t,s,null),p(s,a),p(s,n),p(e,_),m&&m.m(e,null),o=!0,r||(u=H(s,"click",c[9]),r=!0)},p(b,i){b[0].folder?d?(d.p(b,i),i&1&&I(d,1)):(d=le(b),d.c(),I(d,1),d.m(e,l)):d&&(P(),T(d,1,1,()=>{d=null}),j()),b[3].item&&b[3].folder?m?i&8&&I(m,1):(m=se(),m.c(),I(m,1),m.m(e,null)):m&&(P(),T(m,1,1,()=>{m=null}),j())},i(b){o||(I(d),I(t.$$.fragment,b),I(m),o=!0)},o(b){T(d),T(t.$$.fragment,b),T(m),o=!1},d(b){b&&w(e),d&&d.d(),R(t),m&&m.d(),r=!1,u()}}}function le(c){let e,l,s,t,a="Upload",n,g,_;return l=new W({props:{name:"cloud-upload",class:"h-4 w4"}}),{c(){e=N("button"),F(l.$$.fragment),s=D(),t=N("span"),t.textContent=a,this.h()},l(o){e=E(o,"BUTTON",{class:!0});var r=$(e);J(l.$$.fragment,r),s=L(r),t=E(r,"SPAN",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1h4fdy2"&&(t.textContent=a),r.forEach(w),this.h()},h(){v(t,"class","hidden md:inline"),v(e,"class","btn btn-sm variant-filled-primary")},m(o,r){A(o,e,r),Q(l,e,null),p(e,s),p(e,t),n=!0,g||(_=H(e,"click",c[8]),g=!0)},p:U,i(o){n||(I(l.$$.fragment,o),n=!0)},o(o){T(l.$$.fragment,o),n=!1},d(o){o&&w(e),R(l),g=!1,_()}}}function se(c){let e,l,s,t,a="Delete",n,g,_;return l=new W({props:{name:"trash",class:"h-4 w4"}}),{c(){e=N("button"),F(l.$$.fragment),s=D(),t=N("span"),t.textContent=a,this.h()},l(o){e=E(o,"BUTTON",{class:!0});var r=$(e);J(l.$$.fragment,r),s=L(r),t=E(r,"SPAN",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-8hlf9c"&&(t.textContent=a),r.forEach(w),this.h()},h(){v(t,"class","hidden md:inline"),v(e,"class","btn btn-sm variant-filled-primary")},m(o,r){A(o,e,r),Q(l,e,null),p(e,s),p(e,t),n=!0,g||(_=H(e,"click",we),g=!0)},i(o){n||(I(l.$$.fragment,o),n=!0)},o(o){T(l.$$.fragment,o),n=!1},d(o){o&&w(e),R(l),g=!1,_()}}}function ae(c){let e;const l=c[7].default,s=ue(l,c,c[6],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,a){s&&s.m(t,a),e=!0},p(t,a){s&&s.p&&(!e||a&64)&&de(s,l,t,t[6],e?he(l,t[6],a,null):_e(t[6]),null)},i(t){e||(I(s,t),e=!0)},o(t){T(s,t),e=!1},d(t){s&&s.d(t)}}}function ke(c){let e,l,s,t,a,n,g='<a class="anchor" href="/z/pages/portal/cabinet/listings">Home</a>',_,o,r,u,d=c[1],m,b=Y(c[2]),i=[];for(let h=0;h<b.length;h+=1)i[h]=ee(Z(c,b,h));let f=!c[0].file&&te(c),C=ae(c);return{c(){e=N("div"),l=N("div"),s=N("header"),t=N("div"),a=N("ol"),n=N("li"),n.innerHTML=g,_=D();for(let h=0;h<i.length;h+=1)i[h].c();o=D(),f&&f.c(),r=D(),u=N("section"),C.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var y=$(e);l=E(y,"DIV",{class:!0});var k=$(l);s=E(k,"HEADER",{class:!0});var V=$(s);t=E(V,"DIV",{class:!0});var O=$(t);a=E(O,"OL",{class:!0});var S=$(a);n=E(S,"LI",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-1gcd72q"&&(n.innerHTML=g),_=L(S);for(let z=0;z<i.length;z+=1)i[z].l(S);S.forEach(w),o=L(O),f&&f.l(O),O.forEach(w),V.forEach(w),r=L(k),u=E(k,"SECTION",{class:!0});var G=$(u);C.l(G),G.forEach(w),k.forEach(w),y.forEach(w),this.h()},h(){v(n,"class","crumb"),v(a,"class","breadcrumb"),v(t,"class","flex justify-between"),v(s,"class","card-header"),v(u,"class","p-2"),v(l,"class","card p-2 variant-glass-secondary h-full"),v(e,"class","h-full p-0 md:p-2")},m(h,y){A(h,e,y),p(e,l),p(l,s),p(s,t),p(t,a),p(a,n),p(a,_);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(a,null);p(t,o),f&&f.m(t,null),p(l,r),p(l,u),C.m(u,null),m=!0},p(h,[y]){if(y&5){b=Y(h[2]);let k;for(k=0;k<b.length;k+=1){const V=Z(h,b,k);i[k]?i[k].p(V,y):(i[k]=ee(V),i[k].c(),i[k].m(a,null))}for(;k<i.length;k+=1)i[k].d(1);i.length=b.length}h[0].file?f&&(P(),T(f,1,1,()=>{f=null}),j()):f?(f.p(h,y),y&1&&I(f,1)):(f=te(h),f.c(),I(f,1),f.m(t,null)),y&2&&x(d,d=h[1])?(P(),T(C,1,1,U),j(),C=ae(h),C.c(),I(C,1),C.m(u,null)):C.p(h,y)},i(h){m||(I(f),I(C),m=!0)},o(h){T(f),T(C),m=!1},d(h){h&&w(e),ie(i,h),f&&f.d(),C.d(h)}}}const we=()=>{};function Ne(c,e,l){let s,t,a,n;X(c,me,i=>l(0,a=i)),X(c,pe,i=>l(3,n=i));let{$$slots:g={},$$scope:_}=e;const o=ce("__app__"),u=o.get_cabinet_service().get_source_api(a.source),d=async i=>{await u.newFolder((a.folder||"")+"/"+i),l(1,t=t+1),o.utils.small_modal_close()},m=()=>o.nav.cab_uploader(a.source,a.folder),b=()=>{o.utils.small_modal_open(ge,{onNewName:d})};return c.$$set=i=>{"$$scope"in i&&l(6,_=i.$$scope)},c.$$.update=()=>{c.$$.dirty&1&&l(2,s=(a.folder||"").split("/"))},l(1,t=1),[a,t,s,n,o,d,_,g,m,b]}class De extends ne{constructor(e){super(),re(this,e,Ne,ke,x,{})}}export{De as component};
