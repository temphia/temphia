import{s as Y,e as H,i as T,d as b,f as h,g as k,C as M,A,a as D,h as V,c as P,j as d,w as _,W as O,D as J,J as ye,am as Ee,I as De,$ as he,Q as Ce,l as we,m as xe,n as Ie,P as Pe}from"../chunks/scheduler.e2ee220a.js";import{S as Z,i as ee,g as le,t as y,c as re,a as C,b as R,d as B,m as S,e as U}from"../chunks/index.4aee2103.js";import"../chunks/paths.3df37c61.js";import{F as Ae}from"../chunks/floating_add.1495f8dc.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{A as Te}from"../chunks/autotable.0057460b.js";import{L as oe}from"../chunks/loading_spinner.ede256fc.js";import{A as te}from"../chunks/action_picker.7081fe98.js";import{g as Ne}from"../chunks/index.3b48e8d3.js";import{e as ce}from"../chunks/each.e59479a4.js";import{I as Le}from"../chunks/Icon.9e22c3e4.js";function Ve(s){let e,n="end";return{c(){e=h("div"),e.textContent=n},l(t){e=k(t,"DIV",{"data-svelte-h":!0}),M(e)!=="svelte-jf3257"&&(e.textContent=n)},m(t,r){T(t,e,r)},p:A,i:A,o:A,d(t){t&&b(e)}}}function Re(s){let e,n;return e=new te({props:{actions:s[2].map(s[9]),title:"Pick Agent"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.actions=t[2].map(t[9])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Be(s){let e,n;return e=new te({props:{actions:s[1].map(s[8]),title:"Pick Plug"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.actions=t[1].map(t[8])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Se(s){let e,n;return e=new oe({props:{classes:""}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ue(s){let e,n,t,r;const o=[Se,Be,Re,Ve],a=[];function c(l,i){return l[0]?0:l[3]==="pick_plug"?1:l[3]==="pick_agent"?2:3}return e=c(s),n=a[e]=o[e](s),{c(){n.c(),t=H()},l(l){n.l(l),t=H()},m(l,i){a[e].m(l,i),T(l,t,i),r=!0},p(l,[i]){let u=e;e=c(l),e===u?a[e].p(l,i):(le(),y(a[u],1,1,()=>{a[u]=null}),re(),n=a[e],n?n.p(l,i):(n=a[e]=o[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){l&&b(t),a[e].d(l)}}}function Fe(s,e,n){let{service:t}=e,{rid:r}=e,o=!0,a=[],c=[],l="",i="",u="pick_plug";const m=t.api_manager.get_admin_plug_api(),v=async()=>{n(0,o=!0);const f=await m.list_plug();f.ok&&(n(1,a=f.data),n(3,u="pick_plug"),n(0,o=!1))},g=async f=>{l=f.data.id,n(0,o=!0);const w=await m.list_agent(l);if(!w.ok){console.log("@err",w);return}n(3,u="pick_agent"),n(0,o=!1),n(2,c=w.data)},$=async f=>{i=f.data.id,t.nav.admin_agent_res_new(l,i,{resource_id:r}),t.utils.small_modal_close()};v();const j=f=>({action:g,icon:"hashtag",info:f.name,name:f.id,data:f}),p=f=>({action:$,icon:"hashtag",info:f.name,name:f.id,data:f});return s.$$set=f=>{"service"in f&&n(6,t=f.service),"rid"in f&&n(7,r=f.rid)},[o,a,c,u,g,$,t,r,j,p]}class Oe extends Z{constructor(e){super(),ee(this,e,Fe,Ue,Y,{service:6,rid:7})}}const je="room",Me="data_group",Ge="folder",qe="module";function ze(s){let e,n="end";return{c(){e=h("div"),e.textContent=n},l(t){e=k(t,"DIV",{"data-svelte-h":!0}),M(e)!=="svelte-jf3257"&&(e.textContent=n)},m(t,r){T(t,e,r)},p:A,i:A,o:A,d(t){t&&b(e)}}}function Je(s){let e,n;return e=new te({props:{actions:s[2].map(s[8]),title:"Pick Data Group"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.actions=t[2].map(t[8])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Qe(s){let e,n;return e=new te({props:{actions:s[1].map(s[7]),title:"Pick Data Source"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.actions=t[1].map(t[7])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function We(s){let e,n;return e=new oe({props:{classes:""}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function He(s){let e,n,t,r;const o=[We,Qe,Je,ze],a=[];function c(l,i){return l[0]?0:l[3]==="pick_source"?1:l[3]==="pick_group"?2:3}return e=c(s),n=a[e]=o[e](s),{c(){n.c(),t=H()},l(l){n.l(l),t=H()},m(l,i){a[e].m(l,i),T(l,t,i),r=!0},p(l,[i]){let u=e;e=c(l),e===u?a[e].p(l,i):(le(),y(a[u],1,1,()=>{a[u]=null}),re(),n=a[e],n?n.p(l,i):(n=a[e]=o[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){l&&b(t),a[e].d(l)}}}function Ke(s,e,n){let{service:t}=e,r=!0,o="",a="",c=[],l=[],i="pick_source",u;(async()=>{u=await t.get_data_service(),n(1,c=u.sources),n(0,r=!1)})();const v=async p=>{o=p.data,n(0,r=!0);const w=await t.api_manager.get_admin_data_api().list_group(o);w.ok&&(n(2,l=w.data),n(3,i="pick_group"),n(0,r=!1))},g=async p=>{a=p.data.slug,t.nav.admin_resource_new({type:Me,target:`${o}/${a}`}),t.utils.small_modal_close()},$=p=>({action:v,icon:"hashtag",info:"",name:p,data:p}),j=p=>({action:g,icon:"database",info:p.description,name:p.name,data:p});return s.$$set=p=>{"service"in p&&n(6,t=p.service)},[r,c,l,i,v,g,t,$,j]}class Xe extends Z{constructor(e){super(),ee(this,e,Ke,He,Y,{service:6})}}function Ye(s){let e,n,t="New Room",r,o,a,c,l,i="Id",u,m,v,g,$,j="Name",p,f,w,L,G="Next",K,q;return{c(){e=h("div"),n=h("div"),n.textContent=t,r=D(),o=h("p"),a=D(),c=h("div"),l=h("label"),l.textContent=i,u=D(),m=h("input"),v=D(),g=h("div"),$=h("label"),$.textContent=j,p=D(),f=h("input"),w=D(),L=h("button"),L.textContent=G,this.h()},l(N){e=k(N,"DIV",{class:!0});var E=V(e);n=k(E,"DIV",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-16v4srg"&&(n.textContent=t),r=P(E),o=k(E,"P",{class:!0}),V(o).forEach(b),a=P(E),c=k(E,"DIV",{class:!0});var Q=V(c);l=k(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(l)!=="svelte-15a64lk"&&(l.textContent=i),u=P(Q),m=k(Q,"INPUT",{type:!0,class:!0}),Q.forEach(b),v=P(E),g=k(E,"DIV",{class:!0});var F=V(g);$=k(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M($)!=="svelte-1hu3k8f"&&($.textContent=j),p=P(F),f=k(F,"INPUT",{type:!0,class:!0}),F.forEach(b),w=P(E),L=k(E,"BUTTON",{class:!0,"data-svelte-h":!0}),M(L)!=="svelte-1f5u3kl"&&(L.textContent=G),E.forEach(b),this.h()},h(){d(n,"class","text-2xl text-indigo-900"),d(o,"class","text-red-500"),d(l,"for","field-0"),d(l,"class","pb-2 text-gray-700 font-semibold"),d(m,"type","text"),d(m,"class","p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200"),d(c,"class","flex-col flex py-3"),d($,"for","field-1"),d($,"class","pb-2 text-gray-700 font-semibold"),d(f,"type","text"),d(f,"class","p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200"),d(g,"class","flex-col flex py-3"),d(L,"class","p-1 bg-blue-600 rounded hover:bg-blue-800 text-white"),d(e,"class","p-1 flex flex-col")},m(N,E){T(N,e,E),_(e,n),_(e,r),_(e,o),_(e,a),_(e,c),_(c,l),_(c,u),_(c,m),O(m,s[0]),_(e,v),_(e,g),_(g,$),_(g,p),_(g,f),O(f,s[1]),_(e,w),_(e,L),K||(q=[J(m,"input",s[4]),J(f,"input",s[5]),J(L,"click",s[2])],K=!0)},p(N,[E]){E&1&&m.value!==N[0]&&O(m,N[0]),E&2&&f.value!==N[1]&&O(f,N[1])},i:A,o:A,d(N){N&&b(e),K=!1,ye(q)}}}function Ze(s,e,n){let{service:t}=e,r=Ne(),o="";const a=async()=>{t.nav.admin_resource_new({type:je,slug:r,name:o}),t.utils.small_modal_close()};function c(){r=this.value,n(0,r)}function l(){o=this.value,n(1,o)}return s.$$set=i=>{"service"in i&&n(3,t=i.service)},[r,o,a,t,c,l]}class et extends Z{constructor(e){super(),ee(this,e,Ze,Ye,Y,{service:3})}}function ke(s,e,n){const t=s.slice();return t[14]=e[n],t}function be(s,e,n){const t=s.slice();return t[14]=e[n],t}function tt(s){let e,n,t="New Module",r,o,a,c,l,i="Id",u,m,v,g,$,j="Module",p,f,w,L,G,K,q,N,E="Name",Q,F,ue,W,_e="Next",ae,fe,pe;function de(x,I){return x[5]?rt:lt}let se=de(s),z=se(s);return G=new Le({props:{name:s[5]?"lock-open":"lock-closed",class:"w-6 h-6"}}),{c(){e=h("div"),n=h("div"),n.textContent=t,r=D(),o=h("p"),a=D(),c=h("div"),l=h("label"),l.textContent=i,u=D(),m=h("input"),v=D(),g=h("div"),$=h("label"),$.textContent=j,p=D(),z.c(),f=D(),w=h("div"),L=h("button"),R(G.$$.fragment),K=D(),q=h("div"),N=h("label"),N.textContent=E,Q=D(),F=h("input"),ue=D(),W=h("button"),W.textContent=_e,this.h()},l(x){e=k(x,"DIV",{class:!0});var I=V(e);n=k(I,"DIV",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-q5cdz3"&&(n.textContent=t),r=P(I),o=k(I,"P",{class:!0}),V(o).forEach(b),a=P(I),c=k(I,"DIV",{class:!0});var X=V(c);l=k(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(l)!=="svelte-15a64lk"&&(l.textContent=i),u=P(X),m=k(X,"INPUT",{type:!0,class:!0}),X.forEach(b),v=P(I),g=k(I,"DIV",{class:!0});var ne=V(g);$=k(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M($)!=="svelte-9jnhhy"&&($.textContent=j),p=P(ne),z.l(ne),f=P(ne),w=k(ne,"DIV",{class:!0});var me=V(w);L=k(me,"BUTTON",{});var ge=V(L);B(G.$$.fragment,ge),ge.forEach(b),me.forEach(b),ne.forEach(b),K=P(I),q=k(I,"DIV",{class:!0});var ie=V(q);N=k(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(N)!=="svelte-1hu3k8f"&&(N.textContent=E),Q=P(ie),F=k(ie,"INPUT",{type:!0,class:!0}),ie.forEach(b),ue=P(I),W=k(I,"BUTTON",{class:!0,"data-svelte-h":!0}),M(W)!=="svelte-1prj4cd"&&(W.textContent=_e),I.forEach(b),this.h()},h(){d(n,"class","text-2xl text-indigo-900"),d(o,"class","text-red-500"),d(l,"for","field-0"),d(l,"class","pb-2 text-gray-700 font-semibold"),d(m,"type","text"),d(m,"class","p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200"),d(c,"class","flex-col flex py-3"),d($,"for","field-1"),d($,"class","pb-2 text-gray-700 font-semibold"),d(w,"class","w-10 p-1 text-gray-700"),d(g,"class","flex-col flex py-3"),d(N,"for","field-1"),d(N,"class","pb-2 text-gray-700 font-semibold"),d(F,"type","text"),d(F,"class","p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200"),d(q,"class","flex-col flex py-3"),d(W,"class","p-1 bg-blue-600 rounded hover:bg-blue-800 text-white"),d(e,"class","p-1 flex flex-col")},m(x,I){T(x,e,I),_(e,n),_(e,r),_(e,o),_(e,a),_(e,c),_(c,l),_(c,u),_(c,m),O(m,s[0]),_(e,v),_(e,g),_(g,$),_(g,p),z.m(g,null),_(g,f),_(g,w),_(w,L),S(G,L,null),_(e,K),_(e,q),_(q,N),_(q,Q),_(q,F),O(F,s[1]),_(e,ue),_(e,W),ae=!0,fe||(pe=[J(m,"input",s[8]),J(L,"click",s[11]),J(F,"input",s[12]),J(W,"click",s[6])],fe=!0)},p(x,I){I&1&&m.value!==x[0]&&O(m,x[0]),se===(se=de(x))&&z?z.p(x,I):(z.d(1),z=se(x),z&&(z.c(),z.m(g,f)));const X={};I&32&&(X.name=x[5]?"lock-open":"lock-closed"),G.$set(X),I&2&&F.value!==x[1]&&O(F,x[1])},i(x){ae||(C(G.$$.fragment,x),ae=!0)},o(x){y(G.$$.fragment,x),ae=!1},d(x){x&&b(e),z.d(),U(G),fe=!1,ye(pe)}}}function nt(s){let e,n;return e=new oe({}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function lt(s){let e,n,t,r=ce(s[4]||[]),o=[];for(let a=0;a<r.length;a+=1)o[a]=ve(ke(s,r,a));return{c(){e=h("select");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=k(a,"SELECT",{class:!0});var c=V(e);for(let l=0;l<o.length;l+=1)o[l].l(c);c.forEach(b),this.h()},h(){d(e,"class","p-1 rounded border w-full"),s[2]===void 0&&De(()=>s[10].call(e))},m(a,c){T(a,e,c);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);he(e,s[2],!0),n||(t=J(e,"change",s[10]),n=!0)},p(a,c){if(c&16){r=ce(a[4]||[]);let l;for(l=0;l<r.length;l+=1){const i=ke(a,r,l);o[l]?o[l].p(i,c):(o[l]=ve(i),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=r.length}c&20&&he(e,a[2])},d(a){a&&b(e),Ce(o,a),n=!1,t()}}}function rt(s){let e,n,t,r,o,a=ce(s[4]||[]),c=[];for(let l=0;l<a.length;l+=1)c[l]=$e(be(s,a,l));return{c(){e=h("input"),n=D(),t=h("datalist");for(let l=0;l<c.length;l+=1)c[l].c();this.h()},l(l){e=k(l,"INPUT",{type:!0,list:!0,class:!0}),n=P(l),t=k(l,"DATALIST",{id:!0});var i=V(t);for(let u=0;u<c.length;u+=1)c[u].l(i);i.forEach(b),this.h()},h(){d(e,"type","text"),d(e,"list","mod-list"),d(e,"class","p-2 shadow rounded-lg bg-gray-100 outline-none focus:bg-gray-200 w-full"),d(t,"id","mod-list")},m(l,i){T(l,e,i),O(e,s[2]),T(l,n,i),T(l,t,i);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);r||(o=J(e,"input",s[9]),r=!0)},p(l,i){if(i&20&&e.value!==l[2]&&O(e,l[2]),i&16){a=ce(l[4]||[]);let u;for(u=0;u<a.length;u+=1){const m=be(l,a,u);c[u]?c[u].p(m,i):(c[u]=$e(m),c[u].c(),c[u].m(t,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=a.length}},d(l){l&&(b(e),b(n),b(t)),Ce(c,l),r=!1,o()}}}function ve(s){let e,n=s[14]+"",t,r;return{c(){e=h("option"),t=we(n),this.h()},l(o){e=k(o,"OPTION",{});var a=V(e);t=xe(a,n),a.forEach(b),this.h()},h(){e.__value=r=s[14],O(e,e.__value)},m(o,a){T(o,e,a),_(e,t)},p(o,a){a&16&&n!==(n=o[14]+"")&&Ie(t,n),a&16&&r!==(r=o[14])&&(e.__value=r,O(e,e.__value))},d(o){o&&b(e)}}}function $e(s){let e,n=s[14]+"",t,r;return{c(){e=h("option"),t=we(n),this.h()},l(o){e=k(o,"OPTION",{});var a=V(e);t=xe(a,n),a.forEach(b),this.h()},h(){e.__value=r=s[14],O(e,e.__value)},m(o,a){T(o,e,a),_(e,t)},p(o,a){a&16&&n!==(n=o[14]+"")&&Ie(t,n),a&16&&r!==(r=o[14])&&(e.__value=r,O(e,e.__value))},d(o){o&&b(e)}}}function ot(s){let e,n,t,r;const o=[nt,tt],a=[];function c(l,i){return l[3]?0:1}return e=c(s),n=a[e]=o[e](s),{c(){n.c(),t=H()},l(l){n.l(l),t=H()},m(l,i){a[e].m(l,i),T(l,t,i),r=!0},p(l,[i]){let u=e;e=c(l),e===u?a[e].p(l,i):(le(),y(a[u],1,1,()=>{a[u]=null}),re(),n=a[e],n?n.p(l,i):(n=a[e]=o[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){l&&b(t),a[e].d(l)}}}function at(s,e,n){let{service:t}=e,r=Ne(),o="",a="",c=!0,l=[],i=!1;const u=async()=>{t.nav.admin_resource_new({slug:r,type:qe,sub_type:a,name:o}),t.utils.small_modal_close()};(async()=>{const w=await t.api_manager.get_self_api().list_modules();if(!w.ok){console.log("@err",w);return}n(4,l=w.data),n(3,c=!1)})();function v(){r=this.value,n(0,r)}function g(){a=this.value,n(2,a),n(4,l)}function $(){a=Ee(this),n(2,a),n(4,l)}const j=()=>n(5,i=!i);function p(){o=this.value,n(1,o)}return s.$$set=f=>{"service"in f&&n(7,t=f.service)},[r,o,a,c,l,i,u,t,v,g,$,j,p]}class st extends Z{constructor(e){super(),ee(this,e,at,ot,Y,{service:7})}}function it(s){let e,n="end";return{c(){e=h("div"),e.textContent=n},l(t){e=k(t,"DIV",{"data-svelte-h":!0}),M(e)!=="svelte-jf3257"&&(e.textContent=n)},m(t,r){T(t,e,r)},p:A,i:A,o:A,d(t){t&&b(e)}}}function ct(s){let e,n;return e=new te({props:{actions:s[2].map(s[8]),title:"Pick Cabinet Folder"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.actions=t[2].map(t[8])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ut(s){let e,n;return e=new te({props:{actions:s[1].map(s[7]),title:"Pick Cabinet Source"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.actions=t[1].map(t[7])),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ft(s){let e,n;return e=new oe({props:{classes:""}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _t(s){let e,n,t,r;const o=[ft,ut,ct,it],a=[];function c(l,i){return l[0]?0:l[3]==="pick_source"?1:l[3]==="pick_folder"?2:3}return e=c(s),n=a[e]=o[e](s),{c(){n.c(),t=H()},l(l){n.l(l),t=H()},m(l,i){a[e].m(l,i),T(l,t,i),r=!0},p(l,[i]){let u=e;e=c(l),e===u?a[e].p(l,i):(le(),y(a[u],1,1,()=>{a[u]=null}),re(),n=a[e],n?n.p(l,i):(n=a[e]=o[e](l),n.c()),C(n,1),n.m(t.parentNode,t))},i(l){r||(C(n),r=!0)},o(l){y(n),r=!1},d(l){l&&b(t),a[e].d(l)}}}function pt(s,e,n){let{service:t}=e,r=!0,o="",a="",c=[],l=[],i="pick_source",u;(async()=>{u=t.get_cabinet_service(),n(1,c=await u.get_cab_sources()),n(0,r=!1)})();const v=async p=>{o=p.data,n(0,r=!0);const w=await t.api_manager.get_cabinet(o).listRoot();w.ok&&(n(2,l=w.data),n(3,i="pick_folder"),n(0,r=!1))},g=async p=>{a=p.data,t.nav.admin_resource_new({type:Ge,target:`${o}/${a}`}),t.utils.small_modal_close()},$=p=>({action:v,icon:"hashtag",info:"",name:p,data:p}),j=p=>({action:g,icon:"folder",info:"",name:p,data:p});return s.$$set=p=>{"service"in p&&n(6,t=p.service)},[r,c,l,i,v,g,t,$,j]}class dt extends Z{constructor(e){super(),ee(this,e,pt,_t,Y,{service:6})}}function mt(s){let e,n;return e=new te({props:{actions:s[0],title:"Pick a resource type"}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function gt(s,e,n){let{app:t}=e;const r=[{name:"Data Group",icon:"collection",info:"Create a data group resource to perform operations on its tables",action:()=>{t.utils.small_modal_open(Xe,{service:t})}},{name:"Room",icon:"chat-alt",info:"Create a room resource that can publish messages",action:()=>{t.utils.small_modal_open(et,{service:t})}},{name:"Folder",icon:"folder",info:"Create a Folder resource to store and retrive files",action:()=>{t.utils.small_modal_open(dt,{service:t})}},{name:"Module",icon:"hashtag",action:()=>{t.utils.small_modal_open(st,{service:t})},info:"Create a Module resource that can call native extended functionality"},{name:"Custom",icon:"cube",info:"Create a Custom resource with own scope and attributes",action:()=>t.nav.admin_resource_new()}];return s.$$set=o=>{"app"in o&&n(1,t=o.app)},[r,t]}class ht extends Z{constructor(e){super(),ee(this,e,gt,mt,Y,{app:1})}}function kt(s){let e,n;return e=new Te({props:{action_key:"id",show_drop:!0,actions:[{Name:"Edit",Action:s[3],icon:"pencil-alt"},{Name:"Assign agent",Action:s[6],icon:"link",drop:!0},{Name:"Delete",Action:s[4],icon:"trash",drop:!0}],key_names:[["name","Name"],["id","Id"],["type","Type"],["schema","Schema"]],color:["type"],datas:s[0]}}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.datas=t[0]),e.$set(o)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bt(s){let e,n;return e=new oe({}),{c(){R(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:A,i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vt(s){let e,n,t,r,o;const a=[bt,kt],c=[];function l(i,u){return i[1]?0:1}return e=l(s),n=c[e]=a[e](s),r=new Ae({props:{onClick:s[5]}}),{c(){n.c(),t=D(),R(r.$$.fragment)},l(i){n.l(i),t=P(i),B(r.$$.fragment,i)},m(i,u){c[e].m(i,u),T(i,t,u),S(r,i,u),o=!0},p(i,[u]){let m=e;e=l(i),e===m?c[e].p(i,u):(le(),y(c[m],1,1,()=>{c[m]=null}),re(),n=c[e],n?n.p(i,u):(n=c[e]=a[e](i),n.c()),C(n,1),n.m(t.parentNode,t))},i(i){o||(C(n),C(r.$$.fragment,i),o=!0)},o(i){y(n),y(r.$$.fragment,i),o=!1},d(i){i&&b(t),c[e].d(i),U(r,i)}}}function $t(s,e,n){const t=Pe("__app__");let r=[],o=!0;const a=t.api_manager.get_admin_resource_api(),c=async()=>{const v=await a.list();v.ok&&(n(0,r=v.data),n(1,o=!1))};return c(),[r,o,t,v=>t.nav.admin_resource_edit(v),async v=>{(await a.delete(v)).ok&&c()},()=>t.utils.small_modal_open(ht,{app:t}),(v,g)=>{t.utils.small_modal_open(Oe,{service:t,rid:v})}]}class Lt extends Z{constructor(e){super(),ee(this,e,$t,vt,Y,{})}}export{Lt as component};
