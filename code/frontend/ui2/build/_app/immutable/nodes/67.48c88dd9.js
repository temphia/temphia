import{s as b,e as y,i as A,d as X,B as h,P as x,A as I}from"../chunks/scheduler.e2ee220a.js";import{S as L,i as N,t as f,c as P,a as l,g as w,b as d,d as g,m as T,e as k}from"../chunks/index.4aee2103.js";import{A as C}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.2eaeb908.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.c28228c7.js";import{L as D}from"../chunks/loading_spinner.4ef87ddf.js";import{d as S,T as U,a as W,c as Y}from"../chunks/target.d267d535.js";import{p as q}from"../chunks/index.5458542a.js";function K(o){let e,a;return e=new C({props:{message:o[0],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Target Type",ftype:"TEXT",key_name:"target_type",disabled:!0,options:[S,U,W,Y]},{name:"Icon",ftype:"TEXT",key_name:"icon"},{name:"Target",ftype:"TEXT",key_name:"target"},{name:"Context Type",ftype:"TEXT",key_name:"context_type"},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Exec Domain",ftype:"INT",key_name:"exec_domain"},{name:"Exec Meta",ftype:"KEY_VALUE_TEXT",key_name:"exec_meta"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Target App",required_fields:[]},onSave:o[3],data:o[1]}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,r){T(e,t,r),a=!0},p(t,r){const m={};r&1&&(m.message=t[0]),r&2&&(m.data=t[1]),e.$set(m)},i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){f(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}function M(o){let e,a;return e=new D({}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,r){T(e,t,r),a=!0},p:I,i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){f(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}function V(o){let e,a,t,r;const m=[M,K],s=[];function c(n,i){return n[2]?0:1}return e=c(o),a=s[e]=m[e](o),{c(){a.c(),t=y()},l(n){a.l(n),t=y()},m(n,i){s[e].m(n,i),A(n,t,i),r=!0},p(n,[i]){let _=e;e=c(n),e===_?s[e].p(n,i):(w(),f(s[_],1,1,()=>{s[_]=null}),P(),a=s[e],a?a.p(n,i):(a=s[e]=m[e](n),a.c()),l(a,1),a.m(t.parentNode,t))},i(n){r||(l(a),r=!0)},o(n){f(a),r=!1},d(n){n&&X(t),s[e].d(n)}}}function B(o,e,a){let t;h(o,q,p=>a(6,t=p));let{ttype:r=t.ttype}=e,{id:m=t.id}=e;const s=x("__app__"),c=s.api_manager.get_admin_target_api();let n="",i={},_=!0;(async()=>{const p=await c.getApp(r,Number(m));p.ok&&(a(1,i=p.data),a(2,_=!1))})();const E=async p=>{const u=await c.updateApp(r,Number(m),p);if(!u.ok){a(0,n=u.data);return}s.nav.admin_target_apps()};return o.$$set=p=>{"ttype"in p&&a(4,r=p.ttype),"id"in p&&a(5,m=p.id)},[n,i,_,E,r,m]}class R extends L{constructor(e){super(),N(this,e,B,V,b,{ttype:4,id:5})}}export{R as component};
