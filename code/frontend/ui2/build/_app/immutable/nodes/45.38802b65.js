import{s as $,e as E,i as A,d as h,B as x,P as S,A as w}from"../chunks/scheduler.e2ee220a.js";import{S as U,i as C,t as l,c as F,a as c,g as K,b as g,d as k,m as T,e as b}from"../chunks/index.4aee2103.js";import{A as V}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.3df37c61.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{L as Y}from"../chunks/loading_spinner.ede256fc.js";import{p as q}from"../chunks/index.008d0d8b.js";function G(o){let t,a;return t=new V({props:{message:o[0],schema:{fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Renderer",ftype:"TEXT",key_name:"renderer"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:o[3]},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Agent",required_fields:[]},onSave:o[4],data:o[1]}}),{c(){g(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){T(t,e,r),a=!0},p(e,r){const s={};r&1&&(s.message=e[0]),r&8&&(s.schema={fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Renderer",ftype:"TEXT",key_name:"renderer"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:e[3]},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Agent",required_fields:[]}),r&2&&(s.data=e[1]),t.$set(s)},i(e){a||(c(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){b(t,e)}}}function I(o){let t,a;return t=new Y({}),{c(){g(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){T(t,e,r),a=!0},p:w,i(e){a||(c(t.$$.fragment,e),a=!0)},o(e){l(t.$$.fragment,e),a=!1},d(e){b(t,e)}}}function M(o){let t,a,e,r;const s=[I,G],m=[];function p(n,_){return n[2]?0:1}return t=p(o),a=m[t]=s[t](o),{c(){a.c(),e=E()},l(n){a.l(n),e=E()},m(n,_){m[t].m(n,_),A(n,e,_),r=!0},p(n,[_]){let f=t;t=p(n),t===f?m[t].p(n,_):(K(),l(m[f],1,1,()=>{m[f]=null}),F(),a=m[t],a?a.p(n,_):(a=m[t]=s[t](n),a.c()),c(a,1),a.m(e.parentNode,e))},i(n){r||(c(a),r=!0)},o(n){l(a),r=!1},d(n){n&&h(e),m[t].d(n)}}}function P(o,t,a){let e;x(o,q,i=>a(5,e=i));let r=e,s=r.pid,m=r.aid;const p=S("__app__"),n=p.api_manager.get_admin_plug_api();let _="",f={},u=!0,d=[];p.api_manager.self_api.list_executors().then(i=>{a(3,d=i.data||[])}).catch(()=>{});const L=async()=>{const i=await n.get_agent(s,m);if(!i.ok){a(0,_=i.data);return}a(1,f=i.data),a(2,u=!1)},X=async i=>{const y=await n.update_agent(s,m,i);if(!y.ok){a(0,_=y.data);return}p.nav.admin_agents(s)};return L(),[_,f,u,d,X]}class D extends U{constructor(t){super(),C(this,t,P,M,$,{})}}export{D as component};
