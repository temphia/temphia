import{s as X,e as g,i as h,d as A,B as w,P as L,A as P}from"../chunks/scheduler.e2ee220a.js";import{S,i as q,t as c,c as C,a as u,g as F,b as k,d as y,m as T,e as b}from"../chunks/index.4aee2103.js";import{A as N}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.9c1b57c4.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{L as U}from"../chunks/loading_spinner.ede256fc.js";import{p as x}from"../chunks/index.5ed445fc.js";function B(s){let e,a;return e=new N({props:{message:s[0],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"From Plug",ftype:"TEXT",key_name:"from_plug_id",disabled:!0},{name:"From Agent",ftype:"TEXT",key_name:"from_agent_id",disabled:!0},{name:"To Plug",ftype:"TEXT",key_name:"to_plug_id"},{name:"To Agent",ftype:"TEXT",key_name:"to_agent_id"},{name:"To Handler",ftype:"TEXT",key_name:"to_handler"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Update Link",required_fields:[]},onSave:s[3],data:s[1]}}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,o){T(e,t,o),a=!0},p(t,o){const m={};o&1&&(m.message=t[0]),o&2&&(m.data=t[1]),e.$set(m)},i(t){a||(u(e.$$.fragment,t),a=!0)},o(t){c(e.$$.fragment,t),a=!1},d(t){b(e,t)}}}function H(s){let e,a;return e=new U({}),{c(){k(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,o){T(e,t,o),a=!0},p:P,i(t){a||(u(e.$$.fragment,t),a=!0)},o(t){c(e.$$.fragment,t),a=!1},d(t){b(e,t)}}}function K(s){let e,a,t,o;const m=[H,B],r=[];function f(n,_){return n[2]?0:1}return e=f(s),a=r[e]=m[e](s),{c(){a.c(),t=g()},l(n){a.l(n),t=g()},m(n,_){r[e].m(n,_),h(n,t,_),o=!0},p(n,[_]){let l=e;e=f(n),e===l?r[e].p(n,_):(F(),c(r[l],1,1,()=>{r[l]=null}),C(),a=r[e],a?a.p(n,_):(a=r[e]=m[e](n),a.c()),u(a,1),a.m(t.parentNode,t))},i(n){o||(u(a),o=!0)},o(n){c(a),o=!1},d(n){n&&A(t),r[e].d(n)}}}function M(s,e,a){let t;w(s,x,i=>a(7,t=i));let{pid:o=t.pid}=e,{aid:m=t.aid}=e,{lid:r=t.lid}=e;const f=L("__app__"),n=f.api_manager.get_admin_plug_api();let _="",l={},d=!0;(async()=>{const i=await n.get_agent_link(o,m,r);i.ok&&(a(1,l=i.data),a(2,d=!1))})();const E=async i=>{const p=await n.update_agent_link(o,m,r,i);if(!p.ok){a(0,_=p.data);return}f.nav.admin_agents(o)};return s.$$set=i=>{"pid"in i&&a(4,o=i.pid),"aid"in i&&a(5,m=i.aid),"lid"in i&&a(6,r=i.lid)},[_,l,d,E,o,m,r]}class O extends S{constructor(e){super(),q(this,e,M,K,X,{pid:4,aid:5,lid:6})}}export{O as component};
