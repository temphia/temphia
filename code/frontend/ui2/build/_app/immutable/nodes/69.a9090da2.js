import{s as H,A as N,a as T,c as h,i as v,d as A,P as S}from"../chunks/scheduler.e2ee220a.js";import{S as C,i as D,b as k,d as $,m as y,a as f,t as p,e as b,c as F,g as L}from"../chunks/index.4aee2103.js";import"../chunks/paths.555c70f8.js";import{F as P}from"../chunks/floating_add.1495f8dc.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.9f9ec163.js";import{A as q}from"../chunks/autotable.0057460b.js";import{L as B}from"../chunks/loading_spinner.4ceee987.js";import{T as E}from"../chunks/top_actions.3bf62959.js";import{A as I}from"../chunks/action_picker.7081fe98.js";import{e as U,f as j,g as z}from"../chunks/target.d267d535.js";function G(s){let e,n;return e=new I({props:{actions:s[0],title:"New Target hook type"}}),{c(){k(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:N,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function J(s,e,n){let{service:t}=e;const o=[{name:U,icon:"table",info:"Datatable hook",action:()=>{t.nav.admin_target_hook_new(),t.utils.small_modal_close()}},{name:j,icon:"globe-alt",info:"Domain hook",action:()=>{t.nav.admin_target_hook_new(),t.utils.small_modal_close()}},{name:z,icon:"play",info:"Startup hook when node starts",action:()=>{t.nav.admin_target_hook_new(),t.utils.small_modal_close()}}];return s.$$set=r=>{"service"in r&&n(1,t=r.service)},[o,t]}class K extends C{constructor(e){super(),D(this,e,J,G,H,{service:1})}}function M(s){let e,n;return e=new q({props:{action_key:"id",actions:[{Name:"Edit",Action:s[4],icon:"pencil-alt"},{Name:"Delete",Class:"bg-red-400",Action:s[5],icon:"trash"}],key_names:[["name","Name"],["id","Id"],["target_type","Type"],["target","Target"]],color:["target_type"],datas:s[1]}}),{c(){k(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p(t,o){const r={};o&2&&(r.datas=t[1]),e.$set(r)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function O(s){let e,n;return e=new B({}),{c(){k(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){y(e,t,o),n=!0},p:N,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){b(e,t)}}}function Q(s){let e,n,t,o,r,m,_;e=new E({props:{actions:s[3]}});const u=[O,M],l=[];function g(a,c){return a[2]?0:1}return t=g(s),o=l[t]=u[t](s),m=new P({props:{onClick:s[0]}}),{c(){k(e.$$.fragment),n=T(),o.c(),r=T(),k(m.$$.fragment)},l(a){$(e.$$.fragment,a),n=h(a),o.l(a),r=h(a),$(m.$$.fragment,a)},m(a,c){y(e,a,c),v(a,n,c),l[t].m(a,c),v(a,r,c),y(m,a,c),_=!0},p(a,[c]){const d={};c&8&&(d.actions=a[3]),e.$set(d);let i=t;t=g(a),t===i?l[t].p(a,c):(L(),p(l[i],1,1,()=>{l[i]=null}),F(),o=l[t],o?o.p(a,c):(o=l[t]=u[t](a),o.c()),f(o,1),o.m(r.parentNode,r));const w={};c&1&&(w.onClick=a[0]),m.$set(w)},i(a){_||(f(e.$$.fragment,a),f(o),f(m.$$.fragment,a),_=!0)},o(a){p(e.$$.fragment,a),p(o),p(m.$$.fragment,a),_=!1},d(a){a&&(A(n),A(r)),b(e,a),l[t].d(a),b(m,a)}}}function R(s,e,n){let{ttype:t=void 0}=e,{target:o=void 0}=e;const r=S("__app__");let{action_new:m=()=>r.utils.small_modal_open(K,{service:r})}=e,_=[],u=!0;const l=r.api_manager.get_admin_target_api(),g=async()=>{let i;t?i=await l.listHookByType(t,o):i=await l.listHook(),i.ok&&(n(1,_=i.data),n(2,u=!1))};g();const a=i=>r.nav.admin_target_hook_edit(t,Number(i)),c=async(i,w)=>{await l.deleteHook(w.target_type,Number(i)),g()},d={Apps:()=>r.nav.admin_target_apps()};return t&&(d["All Hooks"]=()=>r.nav.admin_target_hooks()),s.$$set=i=>{"ttype"in i&&n(6,t=i.ttype),"target"in i&&n(7,o=i.target),"action_new"in i&&n(0,m=i.action_new)},[m,_,u,d,a,c,t,o]}class ot extends C{constructor(e){super(),D(this,e,R,Q,H,{ttype:6,target:7,action_new:0})}}export{ot as component};
