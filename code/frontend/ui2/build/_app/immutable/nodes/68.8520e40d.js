import{s as b,e as d,i as X,d as h,B as A,P as L,A as P}from"../chunks/scheduler.e2ee220a.js";import{S as w,i as H,t as p,c as N,a as l,g as x,b as y,d as g,m as k,e as T}from"../chunks/index.4aee2103.js";import{A as C}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.9c1b57c4.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.0368a52d.js";import{L as I}from"../chunks/loading_spinner.ede256fc.js";import{p as S}from"../chunks/index.5ed445fc.js";function Y(o){let e,a;return e=new C({props:{message:o[0],schema:{fields:[{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Target Type",ftype:"TEXT",key_name:"target_type",disabled:!0},{name:"Target",ftype:"TEXT",key_name:"target"},{name:"Policy",ftype:"TEXT_POLICY",key_name:"policy"},{name:"Plug Id",ftype:"TEXT",key_name:"plug_id"},{name:"Agent Id",ftype:"TEXT",key_name:"agent_id"},{name:"Handler",ftype:"TEXT",key_name:"handler"},{name:"Exec Meta",ftype:"KEY_VALUE_TEXT",key_name:"exec_meta"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"Edit Target Hook",required_fields:[]},onSave:o[3],data:o[1]}}),{c(){y(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,r){k(e,t,r),a=!0},p(t,r){const s={};r&1&&(s.message=t[0]),r&2&&(s.data=t[1]),e.$set(s)},i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){T(e,t)}}}function q(o){let e,a;return e=new I({}),{c(){y(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,r){k(e,t,r),a=!0},p:P,i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){T(e,t)}}}function K(o){let e,a,t,r;const s=[q,Y],m=[];function f(n,_){return n[2]?0:1}return e=f(o),a=m[e]=s[e](o),{c(){a.c(),t=d()},l(n){a.l(n),t=d()},m(n,_){m[e].m(n,_),X(n,t,_),r=!0},p(n,[_]){let c=e;e=f(n),e===c?m[e].p(n,_):(x(),p(m[c],1,1,()=>{m[c]=null}),N(),a=m[e],a?a.p(n,_):(a=m[e]=s[e](n),a.c()),l(a,1),a.m(t.parentNode,t))},i(n){r||(l(a),r=!0)},o(n){p(a),r=!1},d(n){n&&h(t),m[e].d(n)}}}function M(o,e,a){let t;A(o,S,i=>a(6,t=i));let{ttype:r=t.ttype}=e,{id:s=t.id}=e;const m=L("__app__"),f=m.api_manager.get_admin_target_api();let n="",_={},c=!0;(async()=>{const i=await f.getHook(r,Number(s));i.ok&&(a(1,_=i.data),a(2,c=!1))})();const E=async i=>{const u=await f.updateHook(r,Number(s),i);if(!u.ok){a(0,n=u.data);return}m.nav.admin_target_hooks()};return o.$$set=i=>{"ttype"in i&&a(4,r=i.ttype),"id"in i&&a(5,s=i.id)},[n,_,c,E,r,s]}class F extends w{constructor(e){super(),H(this,e,M,K,b,{ttype:4,id:5})}}export{F as component};
