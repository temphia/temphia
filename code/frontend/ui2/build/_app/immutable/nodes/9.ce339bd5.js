import{s as j,f as u,a as N,l as y,g as _,h as p,c as O,m as k,d as c,j as g,i as V,w as m,D as P,n as T,A as I}from"../chunks/scheduler.e2ee220a.js";import{S as J,i as L}from"../chunks/index.4aee2103.js";function M(o){return new Promise(t=>{setTimeout(t,o)})}function S(o){let t;return{c(){t=u("div"),this.h()},l(e){t=_(e,"DIV",{class:!0}),p(t).forEach(c),this.h()},h(){g(t,"class","h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4")},m(e,a){V(e,t,a)},d(e){e&&c(t)}}}function R(o){let t,e,a,f,r,w,l,n,v,h,D,s=o[1]&&S();return{c(){t=u("div"),e=u("button"),a=u("div"),s&&s.c(),f=N(),r=u("div"),w=y(o[0]),l=y(`...
                `),n=u("div"),this.h()},l(i){t=_(i,"DIV",{class:!0});var d=p(t);e=_(d,"BUTTON",{class:!0});var E=p(e);a=_(E,"DIV",{class:!0});var b=p(a);s&&s.l(b),f=O(b),r=_(b,"DIV",{class:!0});var x=p(r);w=k(x,o[0]),l=k(x,`...
                `),n=_(x,"DIV",{}),p(n).forEach(c),x.forEach(c),b.forEach(c),E.forEach(c),d.forEach(c),this.h()},h(){g(r,"class","ml-2"),g(a,"class","flex items-center justify-center m-[10px]"),g(e,"class",v="bg-indigo-400 h-max w-max rounded-lg text-white font-bold hover:bg-indigo-300 duration-[500ms,800ms]"+(o[1]?"hover:cursor-not-allowed":"")),e.disabled=o[1],g(t,"class","flex items-center justify-center min-h-screen")},m(i,d){V(i,t,d),m(t,e),m(e,a),s&&s.m(a,null),m(a,f),m(a,r),m(r,w),m(r,l),m(r,n),h||(D=P(e,"click",o[2]),h=!0)},p(i,[d]){i[1]?s||(s=S(),s.c(),s.m(a,f)):s&&(s.d(1),s=null),d&1&&T(w,i[0]),d&2&&v!==(v="bg-indigo-400 h-max w-max rounded-lg text-white font-bold hover:bg-indigo-300 duration-[500ms,800ms]"+(i[1]?"hover:cursor-not-allowed":""))&&g(e,"class",v),d&2&&(e.disabled=i[1])},i:I,o:I,d(i){i&&c(t),s&&s.d(),h=!1,D()}}}function U(o,t,e){let a="Waiting",f=!0;const r=async l=>{console.log("@handle_message");const n=JSON.parse(l.data);if(n.mtype==="exec_data"){window.__exec_data__=n.data;const h=new URLSearchParams(location.search).get("redirrect_url");h?(e(0,a="Data received, Redirrecting"),M(1e3),window.location.pathname=h):e(0,a="Data received, Go home ?"),e(1,f=!1)}};return window.addEventListener("message",l=>{if(l.data!=="transfer_port"){console.log("wrong message",l);return}const n=l.ports[0];n.onmessage=r,window.__parent_port__=n,n.postMessage(JSON.stringify({mtype:"get_exec_data"})),e(0,a="Waiting for data")},!1),[a,f,()=>{window.location.pathname="/"}]}class A extends J{constructor(t){super(),L(this,t,U,R,j,{})}}export{A as component};
