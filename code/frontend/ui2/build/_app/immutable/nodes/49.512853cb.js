import{s as i,B as T,P as E}from"../chunks/scheduler.e2ee220a.js";import{S as c,i as l,b as u,d as k,m as d,a as b,t as X,e as g}from"../chunks/index.4aee2103.js";import{A as w}from"../chunks/auto_form.ee101f61.js";import"../chunks/paths.555c70f8.js";import"../chunks/loading_spinner.svelte_svelte_type_style_lang.9f9ec163.js";import{p as S}from"../chunks/index.37ddda1f.js";function x(n){let a,t;return a=new w({props:{message:n[1],schema:{fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Type",ftype:"TEXT",key_name:"type"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:n[0]},{name:"Interface File",ftype:"TEXT",key_name:"iface_file"},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Entry",ftype:"TEXT",key_name:"web_entry"},{name:"Web Script",ftype:"TEXT",key_name:"web_script"},{name:"Web Style",ftype:"TEXT",key_name:"web_style"},{name:"Web Loader",ftype:"TEXT",key_name:"web_loader"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Agent",required_fields:[]},onSave:n[2],data:{}}}),{c(){u(a.$$.fragment)},l(e){k(a.$$.fragment,e)},m(e,r){d(a,e,r),t=!0},p(e,[r]){const m={};r&2&&(m.message=e[1]),r&1&&(m.schema={fields:[{name:"Id",ftype:"TEXT_SLUG",key_name:"id"},{name:"Name",ftype:"TEXT",key_name:"name"},{name:"Type",ftype:"TEXT",key_name:"type"},{name:"Executor",ftype:"SELECT",key_name:"executor",options:e[0]},{name:"Interface File",ftype:"TEXT",key_name:"iface_file"},{name:"Entry File",ftype:"TEXT",key_name:"entry_file"},{name:"Web Entry",ftype:"TEXT",key_name:"web_entry"},{name:"Web Script",ftype:"TEXT",key_name:"web_script"},{name:"Web Style",ftype:"TEXT",key_name:"web_style"},{name:"Web Loader",ftype:"TEXT",key_name:"web_loader"},{name:"Web Files",ftype:"KEY_VALUE_TEXT",key_name:"web_files"},{name:"Extra Meta",ftype:"KEY_VALUE_TEXT",key_name:"extra_meta"}],name:"New Agent",required_fields:[]}),a.$set(m)},i(e){t||(b(a.$$.fragment,e),t=!0)},o(e){X(a.$$.fragment,e),t=!1},d(e){g(a,e)}}}function L(n,a,t){let e;T(n,S,_=>t(3,e=_));let m=e.pid;const s=E("__app__"),f=s.api_manager.get_admin_plug_api();let p=[];s.api_manager.self_api.list_executors().then(_=>{t(0,p=_.data||[])}).catch(()=>{});let o="";return[p,o,async _=>{const y=await f.new_agent(m,_);if(!y.ok){t(1,o=y.data);return}s.nav.admin_agents(m)}]}class I extends c{constructor(a){super(),l(this,a,L,x,i,{})}}export{I as component};
